if [ -z "${PLANTTRACER_CREDENTIALS}" ]; then echo PLANTTRACER_CREDENTIALS is not set; exit 1; fi
venv/bin/python -m pytest --log-cli-level=DEBUG tests/dbreader_test.py
============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/sbarber/git/Plant-Tracer/webapp
configfile: pytest.ini
plugins: env-1.1.5, mock-3.14.0

----------------------------- live log collection ------------------------------
DEBUG    root:paths.py:16 __file__=/Users/sbarber/git/Plant-Tracer/webapp/deploy/app/paths.py
collected 2 items

tests/dbreader_test.py::test_dbreader PASSED                             [ 50%]
tests/dbreader_test.py::test_db_connection 
-------------------------------- live log call ---------------------------------
DEBUG    root:dbreader_test.py:24 dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:dbreader_test.py:30 MySQL Version 8.1.0
INFO     root:dbreader_test.py:31 dbreader: <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:dbreader_test.py:35 dbwriter=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:dbreader_test.py:42 MySQL Version 8.1.0
INFO     root:dbreader_test.py:43 dbwriter: <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [100%]

============================== 2 passed in 0.19s ===============================
dbreader_test is successful
venv/bin/python -m pytest -v --log-cli-level=DEBUG
============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.3.5, pluggy-1.5.0 -- /Users/sbarber/git/Plant-Tracer/webapp/venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/sbarber/git/Plant-Tracer/webapp
configfile: pytest.ini
plugins: env-1.1.5, mock-3.14.0
collecting ... 
----------------------------- live log collection ------------------------------
DEBUG    root:paths.py:16 __file__=/Users/sbarber/git/Plant-Tracer/webapp/deploy/app/paths.py
collected 50 items

tests/api/test_handler.py::test_lambda_handler SKIPPED (not working yet) [  2%]
tests/app_test.py::test_version 
-------------------------------- live log call ---------------------------------
INFO     root:bottle_app.py:218 /ver
PASSED                                                                   [  4%]
tests/app_test.py::test_get_float PASSED                                 [  6%]
tests/app_test.py::test_get_bool PASSED                                  [  8%]
tests/app_test.py::test_static_path PASSED                               [ 10%]
tests/app_test.py::test_error SKIPPED (authentication not yet working)   [ 12%]
tests/app_test.py::test_null_api_key SKIPPED (authentication not yet...) [ 14%]
tests/app_test.py::test_templates 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "course_name": "test-test-78be9b27-a143-4a47-a43a-c876276b course name", "max_enrollment": 10, "args": []}) = {"course_id": 829} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-15af@gmail.com", "course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "name": "Dr. Admin", "args": []}) = {"id": 2444, "name": "Dr. Admin", "email": "simsong+admin+test-15af@gmail.com", "primary_course_id": 829, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 0, "user_id": 2444, "course_id": 829} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-15af@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-15af@gmail.com user_id=2444
INFO     root:db.py:469 course_id=829
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-15af@gmail.com", "course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "args": []}) = {"user_id": 2444, "course_id": 829} 
INFO     root:dbmaint.py:261 generated course_key=test-78be9b27-a143-4a47-a43a-c876276b  admin_email=simsong+admin+test-15af@gmail.com admin_id=2444
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-c598@gmail.com", "course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2445, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-c598@gmail.com", "primary_course_id": 829, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 1, "user_id": 2445, "course_id": 829} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-c598@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-c598@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2445, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2881 
DEBUG    root:db.py:672 purge_movie_data movie_id=2881
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2881, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2881
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2881, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2881
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2881, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2881, "args": []}) = [{"movie_id": 2881, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2445, "course_id": 829, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/829/2881-049a.mov
INFO     root:db_object.py:187 write_object(db://object_store/829/2881-049a.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2445, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2882 
DEBUG    root:db.py:672 purge_movie_data movie_id=2882
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2882, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2882
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2882, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2882
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2882, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2882, "args": []}) = [{"movie_id": 2882, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2445, "course_id": 829, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/829/2882-6277.mov
INFO     root:db_object.py:187 write_object(db://object_store/829/2882-6277.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2445, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2883 
DEBUG    root:db.py:672 purge_movie_data movie_id=2883
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2883, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2883
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2883, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2883
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2883, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2883, "args": []}) = [{"movie_id": 2883, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2445, "course_id": 829, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/829/2883-8da9.mov
INFO     root:db_object.py:187 write_object(db://object_store/829/2883-8da9.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-2ca6db@gmail.com", "course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "name": "Test User Name", "args": []}) = {"id": 2446, "name": "Test User Name", "email": "simsong+test-2ca6db@gmail.com", "primary_course_id": 829, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 0, "user_id": 2446, "course_id": 829} 
INFO     root:user_test.py:98 generated user_email=simsong+test-2ca6db@gmail.com user_id=2446
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-2ca6db@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-2ca6db@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/about
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=False
INFO     root:app_test.py:124 with_api_key=False url=/error
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
DEBUG    root:apikey.py:159 api_key is None and require_auth is True
INFO     root:app_test.py:124 with_api_key=False url=/audit
DEBUG    root:app_test.py:127 not checking html
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
DEBUG    root:apikey.py:159 api_key is None and require_auth is True
INFO     root:app_test.py:124 with_api_key=False url=/list
DEBUG    root:app_test.py:127 not checking html
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
DEBUG    root:apikey.py:159 api_key is None and require_auth is True
INFO     root:app_test.py:124 with_api_key=False url=/analyze
DEBUG    root:app_test.py:127 not checking html
INFO     root:app_test.py:124 with_api_key=False url=/debug
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/login
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=True lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/logout
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/privacy
INFO     root:app_test.py:124 with_api_key=False url=/register
INFO     root:app_test.py:124 with_api_key=False url=/resend
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
INFO     root:app_test.py:124 with_api_key=False url=/tos
DEBUG    root:bottle_app.py:185 /upload require_auth=True
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
DEBUG    root:apikey.py:159 api_key is None and require_auth is True
INFO     root:app_test.py:124 with_api_key=False url=/upload
DEBUG    root:app_test.py:127 not checking html
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
DEBUG    root:apikey.py:157 get_user_api_key=None
DEBUG    root:apikey.py:159 api_key is None and require_auth is True
INFO     root:app_test.py:124 with_api_key=False url=/users
DEBUG    root:app_test.py:127 not checking html
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035457, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/about
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=False
INFO     root:app_test.py:124 with_api_key=True url=/error
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/audit
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/list
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/analyze
INFO     root:app_test.py:124 with_api_key=True url=/debug
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/login
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=True lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
INFO     root:app_test.py:124 with_api_key=True url=/logout
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 6, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/privacy
INFO     root:app_test.py:124 with_api_key=True url=/register
INFO     root:app_test.py:124 with_api_key=True url=/resend
DEBUG    root:apikey.py:154 1. page_dict require_auth=False logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 7, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/tos
DEBUG    root:bottle_app.py:185 /upload require_auth=True
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 8, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/upload
DEBUG    root:apikey.py:154 1. page_dict require_auth=True logout=False lookup=True
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:157 get_user_api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=e78c81849d2e4696ac74e59e421289b6
DEBUG    root:db.py:111 validate_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e78c81849d2e4696ac74e59e421289b6)=[OrderedDict({'id': 2446, 'user_id': 2446, 'api_key': 'e78c81849d2e4696ac74e59e421289b6', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 9, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-2ca6db@gmail.com', 'primary_course_id': 829, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"user_id": 2446, "course_id": 829, "args": []}) = false 
INFO     root:app_test.py:124 with_api_key=True url=/users
PASSED                                                                   [ 16%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["e78c81849d2e4696ac74e59e421289b6"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-2ca6db@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-15af@gmail.com", "course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-15af@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2881
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2881, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2881
INFO     root:db_object.py:207 delete_object(db://object_store/829/2881-049a.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/829/2881-049a.mov o=ParseResult(scheme='db', netloc='object_store', path='/829/2881-049a.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2881, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2881, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2882
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2882, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2882
INFO     root:db_object.py:207 delete_object(db://object_store/829/2882-6277.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/829/2882-6277.mov o=ParseResult(scheme='db', netloc='object_store', path='/829/2882-6277.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2882, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2882, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2883
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2883, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2883
INFO     root:db_object.py:207 delete_object(db://object_store/829/2883-8da9.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/829/2883-8da9.mov o=ParseResult(scheme='db', netloc='object_store', path='/829/2883-8da9.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2883, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2883, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-c598@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-78be9b27-a143-4a47-a43a-c876276b", "args": []}) = 1 

tests/app_test.py::test_api_edit_movie 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "course_name": "test-test-c7450b0b-04cc-45fd-99b5-19a52911 course name", "max_enrollment": 10, "args": []}) = {"course_id": 830} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-d0c3@gmail.com", "course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "name": "Dr. Admin", "args": []}) = {"id": 2447, "name": "Dr. Admin", "email": "simsong+admin+test-d0c3@gmail.com", "primary_course_id": 830, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 0, "user_id": 2447, "course_id": 830} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-d0c3@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-d0c3@gmail.com user_id=2447
INFO     root:db.py:469 course_id=830
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-d0c3@gmail.com", "course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "args": []}) = {"user_id": 2447, "course_id": 830} 
INFO     root:dbmaint.py:261 generated course_key=test-c7450b0b-04cc-45fd-99b5-19a52911  admin_email=simsong+admin+test-d0c3@gmail.com admin_id=2447
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-d701@gmail.com", "course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2448, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-d701@gmail.com", "primary_course_id": 830, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 1, "user_id": 2448, "course_id": 830} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-d701@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-d701@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2448, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2884 
DEBUG    root:db.py:672 purge_movie_data movie_id=2884
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2884, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2884
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2884, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2884
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2884, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2884, "args": []}) = [{"movie_id": 2884, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2448, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2884-b507.mov
INFO     root:db_object.py:187 write_object(db://object_store/830/2884-b507.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2448, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2885 
DEBUG    root:db.py:672 purge_movie_data movie_id=2885
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2885, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2885
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2885, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2885
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2885, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2885, "args": []}) = [{"movie_id": 2885, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2448, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2885-e22f.mov
INFO     root:db_object.py:187 write_object(db://object_store/830/2885-e22f.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2448, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2886 
DEBUG    root:db.py:672 purge_movie_data movie_id=2886
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2886, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2886
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2886, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2886
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2886, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2886, "args": []}) = [{"movie_id": 2886, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035457, "user_id": 2448, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2886-8a01.mov
INFO     root:db_object.py:187 write_object(db://object_store/830/2886-8a01.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-82a179@gmail.com", "course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "name": "Test User Name", "args": []}) = {"id": 2449, "name": "Test User Name", "email": "simsong+test-82a179@gmail.com", "primary_course_id": 830, "created_at": 1746035457, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:57", "demo": 0, "user_id": 2449, "course_id": 830} 
INFO     root:user_test.py:98 generated user_email=simsong+test-82a179@gmail.com user_id=2449
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-82a179@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-82a179@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key b1d93181c605472b8b7e7644bffec956invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key 'b1d93181c605472b8b7e7644bffec956invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key 'b1d93181c605472b8b7e7644bffec956invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035457, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2449, "title": "test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd", "description": "test movie description", "args": []}) = 2887 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2887, "args": []}) = [{"movie_id": 2887, "title": "test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd", "description": "test movie description", "created_at": 1746035457, "user_id": 2449, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2887-e7dd.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2887
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '830/2887-e7dd.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2887-e7dd.mov
INFO     root:db_object.py:187 write_object(db://object_store/830/2887-e7dd.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2887 zipfile=False what=movie_data_urn urn=db://object_store/830/2887-e7dd.mov
INFO     root:db_object.py:160 read_object(db://object_store/830/2887-e7dd.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/830/2887-e7dd.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2887-e7dd.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2887, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-c7450b0b-04cc-45fd-99b5-19a52911', 'course_name': 'test-test-c7450b0b-04cc-45fd-99b5-19a52911 course name', 'course_id': 830, 'admin_email': 'simsong+admin+test-d0c3@gmail.com', 'admin_id': 2447, 'demo_mail': 'demo+admin+test-d701@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'user_email': 'simsong+test-82a179@gmail.com', 'user_id': 2449, 'movie_id': 2887, 'movie_title': 'test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd'}
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2887, "args": []}) = [{"movie_id": 2887, "title": "test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd", "description": "test movie description", "created_at": 1746035457, "user_id": 2449, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:57", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": "db://object_store/830/2887-e7dd.mov", "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db.py:1136 metadata=OrderedDict({'movie_id': 2887, 'title': 'test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd', 'description': 'test movie description', 'created_at': 1746035457, 'user_id': 2449, 'course_id': 830, 'published': 0, 'deleted': 0, 'date_uploaded': 1746035457, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'version': 1, 'fps': None, 'width': None, 'height': None, 'total_frames': None, 'total_bytes': None, 'status': None, 'movie_data_urn': 'db://object_store/830/2887-e7dd.mov', 'movie_zipfile_urn': None, 'tracked_movie_id': None})
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2449, "movie_id": 2887, "args": []}) = true 
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2449, "movie_id": 2887, "args": []}) = true 
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2449, "movie_id": 2887, "args": []}) = true 
INFO     root:db.py:540 movie_id=2887 zipfile=False what=movie_data_urn urn=db://object_store/830/2887-e7dd.mov
INFO     root:db_object.py:160 read_object(db://object_store/830/2887-e7dd.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/830/2887-e7dd.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2887-e7dd.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2887, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:db.py:672 purge_movie_data movie_id=2887
INFO     root:db_object.py:207 delete_object(db://object_store/830/2887-e7dd.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/830/2887-e7dd.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2887-e7dd.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2887, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2887
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2887, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2887
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2887, "args": []}) = null 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/830/2887-3e92.mov
INFO     root:db_object.py:187 write_object(db://object_store/830/2887-3e92.mov,len=62859)
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2887, "args": []}) = [{"movie_id": 2887, "title": "test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd", "description": "test movie description", "created_at": 1746035457, "user_id": 2449, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": "db://object_store/830/2887-3e92.mov", "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db.py:1136 metadata=OrderedDict({'movie_id': 2887, 'title': 'test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd', 'description': 'test movie description', 'created_at': 1746035457, 'user_id': 2449, 'course_id': 830, 'published': 0, 'deleted': 0, 'date_uploaded': 1746035457, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'version': 1, 'fps': None, 'width': None, 'height': None, 'total_frames': None, 'total_bytes': None, 'status': None, 'movie_data_urn': 'db://object_store/830/2887-3e92.mov', 'movie_zipfile_urn': None, 'tracked_movie_id': None})
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=version value=2
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2887, "prop": "version", "value": 2, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 2449, "set_movie_id": 2887, "prop": "fps", "value": 20.0, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=width value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 2449, "set_movie_id": 2887, "prop": "width", "value": 360, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=height value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 2449, "set_movie_id": 2887, "prop": "height", "value": 480, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 2449, "set_movie_id": 2887, "prop": "total_frames", "value": 54, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2887 prop=total_bytes value=62859
DEBUG    root:db.py:111 set_metadata({"user_id": 2449, "set_movie_id": 2887, "prop": "total_bytes", "value": 62859, "args": []}) = 1 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2887, "args": []}) = [{"movie_id": 2887, "title": "test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd", "description": "test movie description", "created_at": 1746035457, "user_id": 2449, "course_id": 830, "published": 0, "deleted": 0, "date_uploaded": 1746035457, "mtime": "2025-04-30 13:50:58", "version": 2, "fps": "20.00", "width": 360, "height": 480, "total_frames": 54, "total_bytes": 62859, "status": null, "movie_data_urn": "db://object_store/830/2887-3e92.mov", "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db.py:1136 metadata=OrderedDict({'movie_id': 2887, 'title': 'test-movie title 67b25178-1403-4843-8dc6-50d987d5a3dd', 'description': 'test movie description', 'created_at': 1746035457, 'user_id': 2449, 'course_id': 830, 'published': 0, 'deleted': 0, 'date_uploaded': 1746035457, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'version': 2, 'fps': Decimal('20.00'), 'width': 360, 'height': 480, 'total_frames': 54, 'total_bytes': 62859, 'status': None, 'movie_data_urn': 'db://object_store/830/2887-3e92.mov', 'movie_zipfile_urn': None, 'tracked_movie_id': None})
PASSED                                                                   [ 18%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = null 
DEBUG    root:db.py:178 validate_api_key(b1d93181c605472b8b7e7644bffec956)=[OrderedDict({'id': 2449, 'user_id': 2449, 'api_key': 'b1d93181c605472b8b7e7644bffec956', 'first_used_at': 1746035457, 'last_used_at': 1746035457, 'created_at': 1746035457, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 57), 'name': 'Test User Name', 'email': 'simsong+test-82a179@gmail.com', 'primary_course_id': 830, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2449, "movie_id": 2887, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2887, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2887
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2887, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2887
INFO     root:db_object.py:207 delete_object(db://object_store/830/2887-3e92.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/830/2887-3e92.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2887-3e92.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2887, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2887, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["b1d93181c605472b8b7e7644bffec956"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-82a179@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-d0c3@gmail.com", "course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-d0c3@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2884
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2884, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2884
INFO     root:db_object.py:207 delete_object(db://object_store/830/2884-b507.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/830/2884-b507.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2884-b507.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2884, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2884, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2885
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2885, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2885
INFO     root:db_object.py:207 delete_object(db://object_store/830/2885-e22f.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/830/2885-e22f.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2885-e22f.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2885, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2885, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2886
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2886, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2886
INFO     root:db_object.py:207 delete_object(db://object_store/830/2886-8a01.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/830/2886-8a01.mov o=ParseResult(scheme='db', netloc='object_store', path='/830/2886-8a01.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2886, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2886, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-d701@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-c7450b0b-04cc-45fd-99b5-19a52911", "args": []}) = 1 

tests/db_object_test.py::test_object_name PASSED                         [ 20%]
tests/db_object_test.py::test_make_urn 
-------------------------------- live log call ---------------------------------
INFO     root:db_object_test.py:34 Saved S3 bucket=None
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/1/2-8e30.txt
PASSED                                                                   [ 22%]
tests/db_object_test.py::test_write_read_delete_object 
-------------------------------- live log call ---------------------------------
INFO     root:db_object_test.py:40 Saved S3 bucket=None
DEBUG    root:db_object_test.py:41 dbwriter: <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/1/3-6854.txt
INFO     root:db_object.py:187 write_object(db://object_store/1/3-6854.txt,len=36)
WARNING  root:dbfile.py:550 quiet:True debug: True cmd: SELECT * from object_store where sha256=%s  vals: ('e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc',)
WARNING  root:dbfile.py:552 EXPLAIN:
WARNING  root:dbfile.py:553 SELECT * from object_store where sha256='e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc'
WARNING  root:dbfile.py:572 TIME TO EXECUTE: 0.0001239776611328125
WARNING  root:dbfile.py:618  result=[{"id": 3191, "sha256": "e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc", "data": "b'ee84dbb7-adb1-4725-bba9-464efc9c8f6d'"}]
WARNING  root:dbfile.py:550 quiet:True debug: True cmd: SELECT * from objects where sha256=%s  vals: ('e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc',)
WARNING  root:dbfile.py:552 EXPLAIN:
WARNING  root:dbfile.py:553 SELECT * from objects where sha256='e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc'
WARNING  root:dbfile.py:572 TIME TO EXECUTE: 0.000102996826171875
WARNING  root:dbfile.py:618  result=[{"id": 3191, "sha256": "e8a36f0d1f56261a314212a699c4898c0de1468ec0b9fa1d8ba3a29b23058dbc", "mtime": "2025-04-30 13:50:58", "urn": "db://object_store/1/3-6854.txt"}]
INFO     root:db_object.py:160 read_object(db://object_store/1/3-6854.txt)
DEBUG    root:db_object.py:162 urn=db://object_store/1/3-6854.txt o=ParseResult(scheme='db', netloc='object_store', path='/1/3-6854.txt', params='', query='', fragment='')
INFO     root:db_object.py:207 delete_object(db://object_store/1/3-6854.txt)
DEBUG    root:db_object.py:209 urn=db://object_store/1/3-6854.txt o=ParseResult(scheme='db', netloc='object_store', path='/1/3-6854.txt', params='', query='', fragment='')
INFO     root:db_object.py:160 read_object(db://object_store/1/3-6854.txt)
DEBUG    root:db_object.py:162 urn=db://object_store/1/3-6854.txt o=ParseResult(scheme='db', netloc='object_store', path='/1/3-6854.txt', params='', query='', fragment='')
PASSED                                                                   [ 24%]
tests/dbreader_test.py::test_dbreader PASSED                             [ 26%]
tests/dbreader_test.py::test_db_connection 
-------------------------------- live log call ---------------------------------
DEBUG    root:dbreader_test.py:24 dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:dbreader_test.py:30 MySQL Version 8.1.0
INFO     root:dbreader_test.py:31 dbreader: <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:dbreader_test.py:35 dbwriter=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:dbreader_test.py:42 MySQL Version 8.1.0
INFO     root:dbreader_test.py:43 dbwriter: <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [ 28%]
tests/endpoint_test.py::test_ver1 
-------------------------------- live log call ---------------------------------
INFO     root:bottle_app.py:218 /ver
PASSED                                                                   [ 30%]
tests/endpoint_test.py::test_ver2 
-------------------------------- live log call ---------------------------------
ERROR    app.bottle_app:bottle_api.py:607 api_ver
PASSED                                                                   [ 32%]
tests/endpoint_test.py::test_add PASSED                                  [ 34%]
tests/endpoint_test.py::test_api_key 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "course_name": "test-test-f6c20cc4-e7a8-467c-9978-201c7d6f course name", "max_enrollment": 10, "args": []}) = {"course_id": 831} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-87f3@gmail.com", "course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "name": "Dr. Admin", "args": []}) = {"id": 2450, "name": "Dr. Admin", "email": "simsong+admin+test-87f3@gmail.com", "primary_course_id": 831, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2450, "course_id": 831} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-87f3@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-87f3@gmail.com user_id=2450
INFO     root:db.py:469 course_id=831
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-87f3@gmail.com", "course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "args": []}) = {"user_id": 2450, "course_id": 831} 
INFO     root:dbmaint.py:261 generated course_key=test-f6c20cc4-e7a8-467c-9978-201c7d6f  admin_email=simsong+admin+test-87f3@gmail.com admin_id=2450
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-d5e3@gmail.com", "course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2451, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-d5e3@gmail.com", "primary_course_id": 831, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2451, "course_id": 831} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-d5e3@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-d5e3@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2451, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2888 
DEBUG    root:db.py:672 purge_movie_data movie_id=2888
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2888, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2888
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2888, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2888
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2888, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2888, "args": []}) = [{"movie_id": 2888, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2451, "course_id": 831, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/831/2888-d05b.mov
INFO     root:db_object.py:187 write_object(db://object_store/831/2888-d05b.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2451, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2889 
DEBUG    root:db.py:672 purge_movie_data movie_id=2889
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2889, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2889
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2889, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2889
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2889, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2889, "args": []}) = [{"movie_id": 2889, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2451, "course_id": 831, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/831/2889-df19.mov
INFO     root:db_object.py:187 write_object(db://object_store/831/2889-df19.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2451, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2890 
DEBUG    root:db.py:672 purge_movie_data movie_id=2890
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2890, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2890
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2890, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2890
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2890, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2890, "args": []}) = [{"movie_id": 2890, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2451, "course_id": 831, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/831/2890-c30b.mov
INFO     root:db_object.py:187 write_object(db://object_store/831/2890-c30b.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-3f5753@gmail.com", "course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "name": "Test User Name", "args": []}) = {"id": 2452, "name": "Test User Name", "email": "simsong+test-3f5753@gmail.com", "primary_course_id": 831, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2452, "course_id": 831} 
INFO     root:user_test.py:98 generated user_email=simsong+test-3f5753@gmail.com user_id=2452
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-3f5753@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-3f5753@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["403f5d11ddb742cfb8c8449938418090"]}) = null 
DEBUG    root:db.py:178 validate_api_key(403f5d11ddb742cfb8c8449938418090)=[OrderedDict({'id': 2452, 'user_id': 2452, 'api_key': '403f5d11ddb742cfb8c8449938418090', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-3f5753@gmail.com', 'primary_course_id': 831, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [ 36%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["403f5d11ddb742cfb8c8449938418090"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-3f5753@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-87f3@gmail.com", "course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-87f3@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2888
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2888, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2888
INFO     root:db_object.py:207 delete_object(db://object_store/831/2888-d05b.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/831/2888-d05b.mov o=ParseResult(scheme='db', netloc='object_store', path='/831/2888-d05b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2888, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2888, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2889
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2889, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2889
INFO     root:db_object.py:207 delete_object(db://object_store/831/2889-df19.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/831/2889-df19.mov o=ParseResult(scheme='db', netloc='object_store', path='/831/2889-df19.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2889, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2889, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2890
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2890, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2890
INFO     root:db_object.py:207 delete_object(db://object_store/831/2890-c30b.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/831/2890-c30b.mov o=ParseResult(scheme='db', netloc='object_store', path='/831/2890-c30b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2890, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2890, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-d5e3@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-f6c20cc4-e7a8-467c-9978-201c7d6f", "args": []}) = 1 

tests/endpoint_test.py::test_api_get_logs 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "course_name": "test-test-febf6671-96f0-4014-91f4-dbad2920 course name", "max_enrollment": 10, "args": []}) = {"course_id": 832} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-5eb2@gmail.com", "course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "name": "Dr. Admin", "args": []}) = {"id": 2453, "name": "Dr. Admin", "email": "simsong+admin+test-5eb2@gmail.com", "primary_course_id": 832, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2453, "course_id": 832} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-5eb2@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-5eb2@gmail.com user_id=2453
INFO     root:db.py:469 course_id=832
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-5eb2@gmail.com", "course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "args": []}) = {"user_id": 2453, "course_id": 832} 
INFO     root:dbmaint.py:261 generated course_key=test-febf6671-96f0-4014-91f4-dbad2920  admin_email=simsong+admin+test-5eb2@gmail.com admin_id=2453
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-309f@gmail.com", "course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2454, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-309f@gmail.com", "primary_course_id": 832, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2454, "course_id": 832} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-309f@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-309f@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2454, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2891 
DEBUG    root:db.py:672 purge_movie_data movie_id=2891
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2891, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2891
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2891, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2891
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2891, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2891, "args": []}) = [{"movie_id": 2891, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2454, "course_id": 832, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/832/2891-7e5e.mov
INFO     root:db_object.py:187 write_object(db://object_store/832/2891-7e5e.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2454, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2892 
DEBUG    root:db.py:672 purge_movie_data movie_id=2892
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2892, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2892
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2892, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2892
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2892, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2892, "args": []}) = [{"movie_id": 2892, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2454, "course_id": 832, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/832/2892-fed1.mov
INFO     root:db_object.py:187 write_object(db://object_store/832/2892-fed1.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2454, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2893 
DEBUG    root:db.py:672 purge_movie_data movie_id=2893
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2893, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2893
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2893, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2893
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2893, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2893, "args": []}) = [{"movie_id": 2893, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2454, "course_id": 832, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/832/2893-31b4.mov
INFO     root:db_object.py:187 write_object(db://object_store/832/2893-31b4.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-19fe00@gmail.com", "course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "name": "Test User Name", "args": []}) = {"id": 2455, "name": "Test User Name", "email": "simsong+test-19fe00@gmail.com", "primary_course_id": 832, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2455, "course_id": 832} 
INFO     root:user_test.py:98 generated user_email=simsong+test-19fe00@gmail.com user_id=2455
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-19fe00@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-19fe00@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["51208af21952478cbeb085a9066c2b40"]}) = null 
DEBUG    root:db.py:178 validate_api_key(51208af21952478cbeb085a9066c2b40)=[OrderedDict({'id': 2455, 'user_id': 2455, 'api_key': '51208af21952478cbeb085a9066c2b40', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-19fe00@gmail.com', 'primary_course_id': 832, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [ 38%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["51208af21952478cbeb085a9066c2b40"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-19fe00@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-5eb2@gmail.com", "course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-5eb2@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2891
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2891, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2891
INFO     root:db_object.py:207 delete_object(db://object_store/832/2891-7e5e.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/832/2891-7e5e.mov o=ParseResult(scheme='db', netloc='object_store', path='/832/2891-7e5e.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2891, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2891, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2892
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2892, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2892
INFO     root:db_object.py:207 delete_object(db://object_store/832/2892-fed1.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/832/2892-fed1.mov o=ParseResult(scheme='db', netloc='object_store', path='/832/2892-fed1.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2892, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2892, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2893
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2893, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2893
INFO     root:db_object.py:207 delete_object(db://object_store/832/2893-31b4.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/832/2893-31b4.mov o=ParseResult(scheme='db', netloc='object_store', path='/832/2893-31b4.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2893, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2893, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-309f@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-febf6671-96f0-4014-91f4-dbad2920", "args": []}) = 1 

tests/endpoint_test.py::test_bulk_register_success 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "course_name": "test-test-2f60c75a-dfe1-4c06-8a13-246c7a54 course name", "max_enrollment": 10, "args": []}) = {"course_id": 833} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Dr. Admin", "args": []}) = {"id": 2456, "name": "Dr. Admin", "email": "simsong+admin+test-fad5@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2456, "course_id": 833} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-fad5@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-fad5@gmail.com user_id=2456
INFO     root:db.py:469 course_id=833
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = {"user_id": 2456, "course_id": 833} 
INFO     root:dbmaint.py:261 generated course_key=test-2f60c75a-dfe1-4c06-8a13-246c7a54  admin_email=simsong+admin+test-fad5@gmail.com admin_id=2456
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-8a31@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2457, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-8a31@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2457, "course_id": 833} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-8a31@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-8a31@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2894 
DEBUG    root:db.py:672 purge_movie_data movie_id=2894
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2894
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2894
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2894, "args": []}) = [{"movie_id": 2894, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2894-da86.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2894-da86.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2895 
DEBUG    root:db.py:672 purge_movie_data movie_id=2895
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2895
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2895
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2895, "args": []}) = [{"movie_id": 2895, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2895-5603.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2895-5603.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2896 
DEBUG    root:db.py:672 purge_movie_data movie_id=2896
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2896
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2896
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2896, "args": []}) = [{"movie_id": 2896, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2896-50a7.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2896-50a7.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-83e9e2@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Test User Name", "args": []}) = {"id": 2458, "name": "Test User Name", "email": "simsong+test-83e9e2@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2458, "course_id": 833} 
INFO     root:user_test.py:98 generated user_email=simsong+test-83e9e2@gmail.com user_id=2458
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-83e9e2@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = null 
DEBUG    root:db.py:178 validate_api_key(94de7cf55cbf4603a1abb626b07c7155)=[OrderedDict({'id': 2458, 'user_id': 2458, 'api_key': '94de7cf55cbf4603a1abb626b07c7155', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-83e9e2@gmail.com', 'primary_course_id': 833, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"course_id": 833, "user_id": 2458, "args": []}) = false 
DEBUG    root:endpoint_test.py:91 r.json={'error': True, 'message': 'User is not authorized to manipulate course.'}
FAILED                                                                   [ 40%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-fad5@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2894
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2894
INFO     root:db_object.py:207 delete_object(db://object_store/833/2894-da86.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2894-da86.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2894-da86.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2895
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2895
INFO     root:db_object.py:207 delete_object(db://object_store/833/2895-5603.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2895-5603.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2895-5603.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2896
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2896
INFO     root:db_object.py:207 delete_object(db://object_store/833/2896-50a7.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2896-50a7.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2896-50a7.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-8a31@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = 1 

tests/endpoint_test.py::test_bulk_register_invalid_email 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "course_name": "test-test-a7d19f1b-366d-4d70-9b82-ae65d6ba course name", "max_enrollment": 10, "args": []}) = {"course_id": 834} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-6d06@gmail.com", "course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "name": "Dr. Admin", "args": []}) = {"id": 2459, "name": "Dr. Admin", "email": "simsong+admin+test-6d06@gmail.com", "primary_course_id": 834, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2459, "course_id": 834} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-6d06@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-6d06@gmail.com user_id=2459
INFO     root:db.py:469 course_id=834
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-6d06@gmail.com", "course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "args": []}) = {"user_id": 2459, "course_id": 834} 
INFO     root:dbmaint.py:261 generated course_key=test-a7d19f1b-366d-4d70-9b82-ae65d6ba  admin_email=simsong+admin+test-6d06@gmail.com admin_id=2459
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-e0f0@gmail.com", "course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2460, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-e0f0@gmail.com", "primary_course_id": 834, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2460, "course_id": 834} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-e0f0@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-e0f0@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2460, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2897 
DEBUG    root:db.py:672 purge_movie_data movie_id=2897
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2897, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2897
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2897, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2897
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2897, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2897, "args": []}) = [{"movie_id": 2897, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2460, "course_id": 834, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/834/2897-b3df.mov
INFO     root:db_object.py:187 write_object(db://object_store/834/2897-b3df.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2460, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2898 
DEBUG    root:db.py:672 purge_movie_data movie_id=2898
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2898, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2898
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2898, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2898
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2898, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2898, "args": []}) = [{"movie_id": 2898, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2460, "course_id": 834, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/834/2898-b346.mov
INFO     root:db_object.py:187 write_object(db://object_store/834/2898-b346.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2460, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2899 
DEBUG    root:db.py:672 purge_movie_data movie_id=2899
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2899, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2899
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2899, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2899
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2899, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2899, "args": []}) = [{"movie_id": 2899, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2460, "course_id": 834, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/834/2899-70c6.mov
INFO     root:db_object.py:187 write_object(db://object_store/834/2899-70c6.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-96a1e1@gmail.com", "course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "name": "Test User Name", "args": []}) = {"id": 2461, "name": "Test User Name", "email": "simsong+test-96a1e1@gmail.com", "primary_course_id": 834, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2461, "course_id": 834} 
INFO     root:user_test.py:98 generated user_email=simsong+test-96a1e1@gmail.com user_id=2461
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-96a1e1@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-96a1e1@gmail.com"}) = {"api_key": "*****"} 
PASSED                                                                   [ 42%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["e26a0f4505b8443c80d6461ee9a8aa25"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-96a1e1@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-6d06@gmail.com", "course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-6d06@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2897
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2897, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2897
INFO     root:db_object.py:207 delete_object(db://object_store/834/2897-b3df.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/834/2897-b3df.mov o=ParseResult(scheme='db', netloc='object_store', path='/834/2897-b3df.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2897, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2897, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2898
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2898, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2898
INFO     root:db_object.py:207 delete_object(db://object_store/834/2898-b346.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/834/2898-b346.mov o=ParseResult(scheme='db', netloc='object_store', path='/834/2898-b346.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2898, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2898, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2899
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2899, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2899
INFO     root:db_object.py:207 delete_object(db://object_store/834/2899-70c6.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/834/2899-70c6.mov o=ParseResult(scheme='db', netloc='object_store', path='/834/2899-70c6.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2899, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2899, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-e0f0@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-a7d19f1b-366d-4d70-9b82-ae65d6ba", "args": []}) = 1 

tests/endpoint_test.py::test_upload_movie_data 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "course_name": "test-test-ba28ebc1-563e-466b-a0ec-33b5858c course name", "max_enrollment": 10, "args": []}) = {"course_id": 835} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-0298@gmail.com", "course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "name": "Dr. Admin", "args": []}) = {"id": 2462, "name": "Dr. Admin", "email": "simsong+admin+test-0298@gmail.com", "primary_course_id": 835, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2462, "course_id": 835} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-0298@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-0298@gmail.com user_id=2462
INFO     root:db.py:469 course_id=835
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-0298@gmail.com", "course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "args": []}) = {"user_id": 2462, "course_id": 835} 
INFO     root:dbmaint.py:261 generated course_key=test-ba28ebc1-563e-466b-a0ec-33b5858c  admin_email=simsong+admin+test-0298@gmail.com admin_id=2462
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-ac50@gmail.com", "course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2463, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-ac50@gmail.com", "primary_course_id": 835, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2463, "course_id": 835} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-ac50@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-ac50@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2463, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2900 
DEBUG    root:db.py:672 purge_movie_data movie_id=2900
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2900, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2900
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2900, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2900
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2900, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2900, "args": []}) = [{"movie_id": 2900, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2463, "course_id": 835, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/835/2900-c1c3.mov
INFO     root:db_object.py:187 write_object(db://object_store/835/2900-c1c3.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2463, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2901 
DEBUG    root:db.py:672 purge_movie_data movie_id=2901
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2901, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2901
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2901, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2901
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2901, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2901, "args": []}) = [{"movie_id": 2901, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2463, "course_id": 835, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/835/2901-6931.mov
INFO     root:db_object.py:187 write_object(db://object_store/835/2901-6931.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2463, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2902 
DEBUG    root:db.py:672 purge_movie_data movie_id=2902
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2902, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2902
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2902, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2902
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2902, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2902, "args": []}) = [{"movie_id": 2902, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2463, "course_id": 835, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/835/2902-4974.mov
INFO     root:db_object.py:187 write_object(db://object_store/835/2902-4974.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-5959f9@gmail.com", "course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "name": "Test User Name", "args": []}) = {"id": 2464, "name": "Test User Name", "email": "simsong+test-5959f9@gmail.com", "primary_course_id": 835, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2464, "course_id": 835} 
INFO     root:user_test.py:98 generated user_email=simsong+test-5959f9@gmail.com user_id=2464
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-5959f9@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-5959f9@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["a7fa06695ad943fab7390a80823e06e4"]}) = null 
DEBUG    root:db.py:178 validate_api_key(a7fa06695ad943fab7390a80823e06e4)=[OrderedDict({'id': 2464, 'user_id': 2464, 'api_key': 'a7fa06695ad943fab7390a80823e06e4', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-5959f9@gmail.com', 'primary_course_id': 835, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2464, "title": "Test Title at Wed Apr 30 13:50:58 2025", "description": "test-upload", "args": []}) = 2903 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2903, "args": []}) = [{"movie_id": 2903, "title": "Test Title at Wed Apr 30 13:50:58 2025", "description": "test-upload", "created_at": 1746035458, "user_id": 2464, "course_id": 835, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/835/2903-e2fc.mov
DEBUG    root:endpoint_test.py:121 r.json={'error': False, 'movie_id': 2903, 'presigned_post': {'fields': {'key': '835/2903-e2fc.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '011e67bf16adef91a5900a400cd4aa965760dfc080f1843e115bd887fd310a27'}, 'url': '/api/upload-movie'}}
DEBUG    root:db.py:111 validate_api_key({"args": ["a7fa06695ad943fab7390a80823e06e4"]}) = null 
DEBUG    root:db.py:178 validate_api_key(a7fa06695ad943fab7390a80823e06e4)=[OrderedDict({'id': 2464, 'user_id': 2464, 'api_key': 'a7fa06695ad943fab7390a80823e06e4', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-5959f9@gmail.com', 'primary_course_id': 835, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2464, "movie_id": 2903, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2903, "delete": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2903
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2903, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2903
INFO     root:db_object.py:207 delete_object(db://object_store/835/2903-e2fc.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/835/2903-e2fc.mov o=ParseResult(scheme='db', netloc='object_store', path='/835/2903-e2fc.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2903, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2903, "args": []}) = null 
PASSED                                                                   [ 44%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["a7fa06695ad943fab7390a80823e06e4"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-5959f9@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-0298@gmail.com", "course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-0298@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2900
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2900, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2900
INFO     root:db_object.py:207 delete_object(db://object_store/835/2900-c1c3.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/835/2900-c1c3.mov o=ParseResult(scheme='db', netloc='object_store', path='/835/2900-c1c3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2900, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2900, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2901
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2901, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2901
INFO     root:db_object.py:207 delete_object(db://object_store/835/2901-6931.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/835/2901-6931.mov o=ParseResult(scheme='db', netloc='object_store', path='/835/2901-6931.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2901, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2901, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2902
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2902, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2902
INFO     root:db_object.py:207 delete_object(db://object_store/835/2902-4974.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/835/2902-4974.mov o=ParseResult(scheme='db', netloc='object_store', path='/835/2902-4974.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2902, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2902, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-ac50@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-ba28ebc1-563e-466b-a0ec-33b5858c", "args": []}) = 1 

tests/gravitropism_test.py::test_calculate_two_points[0-1-3-4-2-expected_results0] PASSED [ 46%]
tests/gravitropism_test.py::test_calculate_two_points[1-1-2-2-2-expected_results1] PASSED [ 48%]
tests/gravitropism_test.py::test_calculate_two_points[1-2-2-4-2-expected_results2] PASSED [ 50%]
tests/gravitropism_test.py::test_calculate_two_points[0-0-0-0-2-expected_results3] PASSED [ 52%]
tests/gravitropism_test.py::test_calculate_two_points[3-4-0-1-2-expected_results4] PASSED [ 54%]
tests/gravitropism_test.py::test_coordinates_type_error PASSED           [ 56%]
tests/integration/test_api_gateway.py::TestApiGateway::test_api_gateway SKIPPED [ 58%]
tests/mailer_test.py::test_send_message SKIPPED (changing authentica...) [ 60%]
tests/mailer_test.py::test_register_email SKIPPED (changing authenti...) [ 62%]
tests/movie_test.py::test_edge_case PASSED                               [ 64%]
tests/movie_test.py::test_new_movie 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "course_name": "test-test-538f752c-a4fb-4056-ace1-f74c9d33 course name", "max_enrollment": 10, "args": []}) = {"course_id": 836} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-5ab4@gmail.com", "course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "name": "Dr. Admin", "args": []}) = {"id": 2465, "name": "Dr. Admin", "email": "simsong+admin+test-5ab4@gmail.com", "primary_course_id": 836, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2465, "course_id": 836} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-5ab4@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-5ab4@gmail.com user_id=2465
INFO     root:db.py:469 course_id=836
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-5ab4@gmail.com", "course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "args": []}) = {"user_id": 2465, "course_id": 836} 
INFO     root:dbmaint.py:261 generated course_key=test-538f752c-a4fb-4056-ace1-f74c9d33  admin_email=simsong+admin+test-5ab4@gmail.com admin_id=2465
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-5005@gmail.com", "course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2466, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-5005@gmail.com", "primary_course_id": 836, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2466, "course_id": 836} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-5005@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-5005@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2466, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2904 
DEBUG    root:db.py:672 purge_movie_data movie_id=2904
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2904, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2904
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2904, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2904
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2904, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2904, "args": []}) = [{"movie_id": 2904, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2466, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/836/2904-43ad.mov
INFO     root:db_object.py:187 write_object(db://object_store/836/2904-43ad.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2466, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2905 
DEBUG    root:db.py:672 purge_movie_data movie_id=2905
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2905, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2905
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2905, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2905
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2905, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2905, "args": []}) = [{"movie_id": 2905, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2466, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/836/2905-70d4.mov
INFO     root:db_object.py:187 write_object(db://object_store/836/2905-70d4.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2466, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2906 
DEBUG    root:db.py:672 purge_movie_data movie_id=2906
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2906, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2906
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2906, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2906
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2906, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2906, "args": []}) = [{"movie_id": 2906, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2466, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/836/2906-f30d.mov
INFO     root:db_object.py:187 write_object(db://object_store/836/2906-f30d.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-2b4f2a@gmail.com", "course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "name": "Test User Name", "args": []}) = {"id": 2467, "name": "Test User Name", "email": "simsong+test-2b4f2a@gmail.com", "primary_course_id": 836, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2467, "course_id": 836} 
INFO     root:user_test.py:98 generated user_email=simsong+test-2b4f2a@gmail.com user_id=2467
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-2b4f2a@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-2b4f2a@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key 0aa4ee20a4c542ada51ec4b393f873e5invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key '0aa4ee20a4c542ada51ec4b393f873e5invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key '0aa4ee20a4c542ada51ec4b393f873e5invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2467, "title": "test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa", "description": "test movie description", "args": []}) = 2907 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2907, "args": []}) = [{"movie_id": 2907, "title": "test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa", "description": "test movie description", "created_at": 1746035458, "user_id": 2467, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/836/2907-6767.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2907
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '836/2907-6767.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/836/2907-6767.mov
INFO     root:db_object.py:187 write_object(db://object_store/836/2907-6767.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2907 zipfile=False what=movie_data_urn urn=db://object_store/836/2907-6767.mov
INFO     root:db_object.py:160 read_object(db://object_store/836/2907-6767.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/836/2907-6767.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2907-6767.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2907, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-538f752c-a4fb-4056-ace1-f74c9d33', 'course_name': 'test-test-538f752c-a4fb-4056-ace1-f74c9d33 course name', 'course_id': 836, 'admin_email': 'simsong+admin+test-5ab4@gmail.com', 'admin_id': 2465, 'demo_mail': 'demo+admin+test-5005@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'user_email': 'simsong+test-2b4f2a@gmail.com', 'user_id': 2467, 'movie_id': 2907, 'movie_title': 'test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa'}
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:movie_test.py:196 found movie: {'course_id': 836, 'created_at': 1746035458, 'date_uploaded': 1746035458, 'deleted': 0, 'description': 'test movie description', 'email': 'simsong+test-2b4f2a@gmail.com', 'fps': None, 'height': None, 'movie_id': 2907, 'name': 'Test User Name', 'orig_movie': None, 'primary_course_id': 836, 'published': 0, 'title': 'test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa', 'total_bytes': None, 'total_frames': None, 'user_id': 2467, 'width': None}
DEBUG    root:db.py:111 validate_api_key({"args": ["invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/delete-movie
DEBUG    root:bottle_api.py:313 api_get_movie_data
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2467, "movie_id": 2907, "args": []}) = true 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2907, "args": []}) = [{"movie_id": 2907, "title": "test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa", "description": "test movie description", "created_at": 1746035458, "user_id": 2467, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": "db://object_store/836/2907-6767.mov", "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/836/2907-6767.mov
DEBUG    root:movie_test.py:210 test_new_movie: resp.data[0:10]=b'#REDIRECT ' len=144
INFO     root:movie_test.py:160 REDIRECT: url=#REDIRECT /api/get-object?urn=db%3A%2F%2Fobject_store%2F836%2F2907-6767.mov&sig=2a569a9cb7473eb098206442c3fc46436910ff4cbf3af50a33188dd964c5e662 
INFO     root:db_object.py:132 URL signature matches. urn=db://object_store/836/2907-6767.mov
INFO     root:db_object.py:160 read_object(db://object_store/836/2907-6767.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/836/2907-6767.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2907-6767.mov', params='', query='', fragment='')
DEBUG    root:movie_test.py:168 returning resp.data len=235944
DEBUG    root:movie_test.py:217 len(movie_data)=235944 first 1024:b'\x00\x00\x00\x14ftypqt  \x00\x00\x00\x00qt  \x00\x00\x00\x08wide\x00\x03\x93\x7fmdat\x00\x00\x00+\x06\x05#GVJ\xdc\\LC?\x94\xef\xc5\x11<\xd1C\xa8\x00\x00\x03\x00\x00\x03\x00\x00\x03\x00\x00\x03\x00\x01\xdd\xcc\xcc\xdd\x02\x00\n\xae`\x80\x00\x00\x1ds%\xb8 \x1f\xb8`\xf6\xd1\x98\x0f\xff\x05e\x82\xf87Qxu\xf3\x11\xc2\x1a6\\\xf1(\x90op\x17\x12\xa8\xf6\xbc\x138\x18\xe1_J\x8c\x191\xbd_$\xc4\xb72^\\p\xaazJ\x886\xc5F\xfb"._*\x05\x1e\xc3\xfe?\xe3\x98\x90\xba\xad\xbf\xdb\xb4\x14\x05d\x02\x17\xc2;\xe4\xcd\xf9\x9d\x1f\x1dI\x94ob\x83\xf9\x19\xb8\x88$\x14\x90\xd0,\'\xe1\x99h\'\xf3\xa8\xff\xde\x88\xb5\xbf/\xa5\x1d\xe7\xb8\xa3\xd3\x01\xf0fc\xa0Y\xaaO\xb9\x05\xe9\x8b\x11\x88\xc8\x1f3\x9aQ\xee\xb7\xd0\x11\x9d\x82%\'\xf7I8;E\x11\x03.\xf6\x7f6Vh\xa8\x96F\x98\xb7\xad\xff\x14\x9d$E\xfc\x92\xa6\x10\xd3\xe6[wZ\x15V1:oW>\xb0\xfeE\x8c\xf7\x8c\xfc\xb5J\x18y\xc6PI\x08(\x96\xe3\xfd\xe9{F\x95i\x90\xe7\xdb\x1a\xcfX(\xac\x08\xfcx\xf7\xecd\x06\xbfs\x1a\x87\x8b\xb6y\x19\x14a\x1ek\x9dN\x89\x9b\\>K5j\xc3\xfe\x94\x84r\x03\xa8\xdc@O \x83K^\x91$\xd1\x03\x1a;f\x07k\x18?J\xb5\x0c\x02\xb4Q\xb4l\x03Z\xbb\xfc{^<\x07\xc1\x9f\xf75\xbb\x9f\xfb\xce&\xfb \x14\xa93nd=\x8e/\xf2G\xa7\x8a\xbf\xc6\x92\xda\x8d\xd5H\xdb\xd2\xcb\x1dc_\xf7\xe0\xd9H\xda\xe0\xd1\x87\x8c\xec\xb0\x85\xc6TM;\xb8\x96\xf3\xed:O\xdd\xe8\xb5\x02\xb8D2\xa9\x94\xe9HwA\xd9? \x85Mjd\xf7\xe8\x86\x9a\xb0\xcb6)\xb2\xf9\xc3m\xf7\x14w\x1bT\x95\'\xdf&+\xc4l$ppF\x1dp2\x80\xd3\xa9\xf1\xa8Y~\xb9\xca\x94\xe9o\xbe\x93\x1amc5\x10\x88\xa0}xL\xf5J\x17<\xee$g\xad\x11\x0bV\xf8\xdfq\xc32h\xb9\xd3A13\xa8\xe4\xf8\\VAEr\x1e\x9d\xbb\x0e\xd6\x03H\x87\xbd\x02\'!\x0fg\xbeL\xad\xd9\x90\xdc\x00\x05\x86\xbdz\x1c\xff<\xae\x98\xd1\xe0\x96)\xa0\x82\x0e\xd7\xa2\x86\xa4~N@\xf2*\x1d\xa3E\x0c\xd8\xa1\xbf\xc8\xf8\xd5-\xba\xe9\xfdo\xa9\x0c\x86U\x145\x9f\xdd\xfb\x9c\x80~u\x7f\xa2\x8c^\x8ac\x13\xb9\x04x\xe5\xa2\xbc5Vo\x11\xee\xc8)\xf9\xa9+\x1a\xc5\xf7yK\xa9\x19\xb1}hE\xfc\x99P\xb2\x99/\x05L\xcf%xa\x968F\x98\xcc\x84\x85\xf2{G\x10+4z\xdf\xf5\x9f\x84\x13\x8eDW\xd2\xfc\xff\xfa\xad\x93dy\xaf\xd3Z\x1f\x93\xc1\'\xa0P\x07Qc\xa3QG\x18\x0f\xb7\x1d~\xe3\x15.\xb5\x93H\x1eI\xd4\xeb\xeb6u\xc9\xcb\x8dix\xa8{+\xdc\x8a8jv\x8bz\xe5\xb5\xe7\xce\xb5\xbdO\x89\xd5\x9a\x10\xf5U\xdb\xf6\x8c\xc5\xb4\xf5\xb8\xf8V\xa8s>\xfa\x9bk/A\x14\xa3\x01?\xe5\xf4o\xdc\x0f\x15\x86\xa9Xn$4)\x97`f\xc4\x1cn\x08\xfa\x10o\xa4\x86\xea6\x80m<X]pr\xda{\xbf\rG\xca\xce\xa1\x1f$=\xd8;\xaf\x83=\xea\x9f\x11\xec7\x1as\xa6\x03\xe7\x1aG\xd5\xb2O\x8bi\x1a\x9e\x946\x95\x8dg\x1ah\xe1I\\\x8eN8\xf1\x01\x85s\xd2D\xe3\x95\xf02@\xe5\\1\xe9\xc5\xcc\xe3>\xa3\x85f\xdc\xf2}\xefs\xe5\xc0\xd63\xee\xd9b"\xcd\xcc\xc9\xe6\x17\x93D\x1b\xdf\x03*\xea\xfe7\xde\xef\xd2kIn8\x9f\xcaJOK\xcd\xcf\xd2\x14F\x9ej\xdc\\\x97\x80\xf3\'\x91\xd8\x9a\xb7R\xb4\xdeo\xe9\'\x9fF\x1cz\xb8\xaa\xb3 iPa\xa7\x14\x0e\xa9y\x0f\xbb\x10\xdf|+\x05\x87\xf6\x99,\xd6\xaa\xbc\xec\xfd%\x80\xe4\xfbf\xe6\xc4\xf7\x81\xdf\xde\xb2\xf4A\x03)\xbbBFo\x0c\xbey\x1d\xb2!_?\x80"\x9bm}\xd3P`n\xc1\x16\x89\x18\xba\xf3\xee\x8cK\xe9\x90\xe9T\xd9\x07'
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2467, "movie_id": 2907, "args": []}) = true 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 2467, "movie_id": 2907, "get_last_frame_tracked": true, "args": []}) = [{"movie_id": 2907, "title": "test-movie title 342adfec-64b8-4aad-b00e-60a4286894fa", "description": "test movie description", "created_at": 1746035458, "user_id": 2467, "course_id": 836, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": "db://object_store/836/2907-6767.mov", "movie_zipfile_urn": null, "tracked_movie_id": null, "last_frame_tracked": null}] 
INFO     root:db.py:540 movie_id=2907 zipfile=False what=movie_data_urn urn=db://object_store/836/2907-6767.mov
INFO     root:db_object.py:160 read_object(db://object_store/836/2907-6767.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/836/2907-6767.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2907-6767.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2907, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2907 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 2467, "set_movie_id": 2907, "prop": "fps", "value": 20.0, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2907 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 2467, "set_movie_id": 2907, "prop": "width", "value": 480, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2907 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 2467, "set_movie_id": 2907, "prop": "height", "value": 360, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2907 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 2467, "set_movie_id": 2907, "prop": "total_frames", "value": 54, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2907 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 2467, "set_movie_id": 2907, "prop": "total_bytes", "value": 235944, "args": []}) = 1 
PASSED                                                                   [ 66%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0aa4ee20a4c542ada51ec4b393f873e5)=[OrderedDict({'id': 2467, 'user_id': 2467, 'api_key': '0aa4ee20a4c542ada51ec4b393f873e5', 'first_used_at': 1746035458, 'last_used_at': 1746035458, 'created_at': 1746035458, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-2b4f2a@gmail.com', 'primary_course_id': 836, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2467, "movie_id": 2907, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2907, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2907
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2907, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2907
INFO     root:db_object.py:207 delete_object(db://object_store/836/2907-6767.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/836/2907-6767.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2907-6767.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2907, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2907, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["0aa4ee20a4c542ada51ec4b393f873e5"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-2b4f2a@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-5ab4@gmail.com", "course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-5ab4@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2904
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2904, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2904
INFO     root:db_object.py:207 delete_object(db://object_store/836/2904-43ad.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/836/2904-43ad.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2904-43ad.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2904, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2904, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2905
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2905, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2905
INFO     root:db_object.py:207 delete_object(db://object_store/836/2905-70d4.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/836/2905-70d4.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2905-70d4.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2905, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2905, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2906
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2906, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2906
INFO     root:db_object.py:207 delete_object(db://object_store/836/2906-f30d.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/836/2906-f30d.mov o=ParseResult(scheme='db', netloc='object_store', path='/836/2906-f30d.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2906, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2906, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-5005@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-538f752c-a4fb-4056-ace1-f74c9d33", "args": []}) = 1 

tests/movie_test.py::test_movie_upload_presigned_post 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "course_name": "test-test-4b35e7ba-af0c-4efe-ba11-500a9112 course name", "max_enrollment": 10, "args": []}) = {"course_id": 837} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-4d07@gmail.com", "course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "name": "Dr. Admin", "args": []}) = {"id": 2468, "name": "Dr. Admin", "email": "simsong+admin+test-4d07@gmail.com", "primary_course_id": 837, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2468, "course_id": 837} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-4d07@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-4d07@gmail.com user_id=2468
INFO     root:db.py:469 course_id=837
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-4d07@gmail.com", "course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "args": []}) = {"user_id": 2468, "course_id": 837} 
INFO     root:dbmaint.py:261 generated course_key=test-4b35e7ba-af0c-4efe-ba11-500a9112  admin_email=simsong+admin+test-4d07@gmail.com admin_id=2468
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-3ac2@gmail.com", "course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2469, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-3ac2@gmail.com", "primary_course_id": 837, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2469, "course_id": 837} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-3ac2@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-3ac2@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2469, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2908 
DEBUG    root:db.py:672 purge_movie_data movie_id=2908
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2908, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2908
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2908, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2908
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2908, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2908, "args": []}) = [{"movie_id": 2908, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2469, "course_id": 837, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/837/2908-b837.mov
INFO     root:db_object.py:187 write_object(db://object_store/837/2908-b837.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2469, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2909 
DEBUG    root:db.py:672 purge_movie_data movie_id=2909
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2909, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2909
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2909, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2909
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2909, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2909, "args": []}) = [{"movie_id": 2909, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2469, "course_id": 837, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/837/2909-0157.mov
INFO     root:db_object.py:187 write_object(db://object_store/837/2909-0157.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2469, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2910 
DEBUG    root:db.py:672 purge_movie_data movie_id=2910
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2910, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2910
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2910, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2910
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2910, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2910, "args": []}) = [{"movie_id": 2910, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2469, "course_id": 837, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/837/2910-c4bb.mov
INFO     root:db_object.py:187 write_object(db://object_store/837/2910-c4bb.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-9ebe84@gmail.com", "course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "name": "Test User Name", "args": []}) = {"id": 2470, "name": "Test User Name", "email": "simsong+test-9ebe84@gmail.com", "primary_course_id": 837, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2470, "course_id": 837} 
INFO     root:user_test.py:98 generated user_email=simsong+test-9ebe84@gmail.com user_id=2470
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-9ebe84@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-9ebe84@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["4c00a4568d5c4bc381ad0a68ce62babe"]}) = null 
DEBUG    root:db.py:178 validate_api_key(4c00a4568d5c4bc381ad0a68ce62babe)=[OrderedDict({'id': 2470, 'user_id': 2470, 'api_key': '4c00a4568d5c4bc381ad0a68ce62babe', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-9ebe84@gmail.com', 'primary_course_id': 837, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2470, "title": "test-movie title 329d5a38-2b69-4518-b471-ba5ae778f5d1", "description": "test movie description", "args": []}) = 2911 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2911, "args": []}) = [{"movie_id": 2911, "title": "test-movie title 329d5a38-2b69-4518-b471-ba5ae778f5d1", "description": "test movie description", "created_at": 1746035458, "user_id": 2470, "course_id": 837, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/837/2911-e4fa.mov
DEBUG    root:db.py:660 purge_movie_frames movie_id=2911
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2911, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2911
INFO     root:db_object.py:207 delete_object(db://object_store/837/2911-e4fa.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/837/2911-e4fa.mov o=ParseResult(scheme='db', netloc='object_store', path='/837/2911-e4fa.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2911, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2911, "args": []}) = null 
INFO     root:movie_test.py:253 PURGE MOVIE 2911
PASSED                                                                   [ 68%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["4c00a4568d5c4bc381ad0a68ce62babe"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-9ebe84@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-4d07@gmail.com", "course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-4d07@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2908
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2908, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2908
INFO     root:db_object.py:207 delete_object(db://object_store/837/2908-b837.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/837/2908-b837.mov o=ParseResult(scheme='db', netloc='object_store', path='/837/2908-b837.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2908, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2908, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2909
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2909, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2909
INFO     root:db_object.py:207 delete_object(db://object_store/837/2909-0157.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/837/2909-0157.mov o=ParseResult(scheme='db', netloc='object_store', path='/837/2909-0157.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2909, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2909, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2910
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2910, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2910
INFO     root:db_object.py:207 delete_object(db://object_store/837/2910-c4bb.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/837/2910-c4bb.mov o=ParseResult(scheme='db', netloc='object_store', path='/837/2910-c4bb.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2910, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2910, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-3ac2@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-4b35e7ba-af0c-4efe-ba11-500a9112", "args": []}) = 1 

tests/movie_test.py::test_movie_update_metadata 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "course_name": "test-test-55c307f0-4cc3-463d-8bd6-28e95f5e course name", "max_enrollment": 10, "args": []}) = {"course_id": 838} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-d300@gmail.com", "course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "name": "Dr. Admin", "args": []}) = {"id": 2471, "name": "Dr. Admin", "email": "simsong+admin+test-d300@gmail.com", "primary_course_id": 838, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2471, "course_id": 838} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-d300@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-d300@gmail.com user_id=2471
INFO     root:db.py:469 course_id=838
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-d300@gmail.com", "course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "args": []}) = {"user_id": 2471, "course_id": 838} 
INFO     root:dbmaint.py:261 generated course_key=test-55c307f0-4cc3-463d-8bd6-28e95f5e  admin_email=simsong+admin+test-d300@gmail.com admin_id=2471
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-8671@gmail.com", "course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2472, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-8671@gmail.com", "primary_course_id": 838, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2472, "course_id": 838} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-8671@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-8671@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2472, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2912 
DEBUG    root:db.py:672 purge_movie_data movie_id=2912
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2912, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2912
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2912, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2912
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2912, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2912, "args": []}) = [{"movie_id": 2912, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2472, "course_id": 838, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/838/2912-24bb.mov
INFO     root:db_object.py:187 write_object(db://object_store/838/2912-24bb.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2472, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2913 
DEBUG    root:db.py:672 purge_movie_data movie_id=2913
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2913, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2913
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2913, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2913
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2913, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2913, "args": []}) = [{"movie_id": 2913, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2472, "course_id": 838, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/838/2913-3bc7.mov
INFO     root:db_object.py:187 write_object(db://object_store/838/2913-3bc7.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2472, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2914 
DEBUG    root:db.py:672 purge_movie_data movie_id=2914
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2914, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2914
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2914, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2914
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2914, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2914, "args": []}) = [{"movie_id": 2914, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2472, "course_id": 838, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/838/2914-a2ea.mov
INFO     root:db_object.py:187 write_object(db://object_store/838/2914-a2ea.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-ff0247@gmail.com", "course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "name": "Test User Name", "args": []}) = {"id": 2473, "name": "Test User Name", "email": "simsong+test-ff0247@gmail.com", "primary_course_id": 838, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2473, "course_id": 838} 
INFO     root:user_test.py:98 generated user_email=simsong+test-ff0247@gmail.com user_id=2473
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-ff0247@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-ff0247@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54finvalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54finvalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key 477f891ee7f94e66893b5f55bd06c54finvalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key '477f891ee7f94e66893b5f55bd06c54finvalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key '477f891ee7f94e66893b5f55bd06c54finvalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2473, "title": "test-movie title 718947ee-b50d-48c2-9229-94f10b02c754", "description": "test movie description", "args": []}) = 2915 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2915, "args": []}) = [{"movie_id": 2915, "title": "test-movie title 718947ee-b50d-48c2-9229-94f10b02c754", "description": "test movie description", "created_at": 1746035459, "user_id": 2473, "course_id": 838, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/838/2915-f396.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2915
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '838/2915-f396.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/838/2915-f396.mov
INFO     root:db_object.py:187 write_object(db://object_store/838/2915-f396.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2915 zipfile=False what=movie_data_urn urn=db://object_store/838/2915-f396.mov
INFO     root:db_object.py:160 read_object(db://object_store/838/2915-f396.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/838/2915-f396.mov o=ParseResult(scheme='db', netloc='object_store', path='/838/2915-f396.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2915, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-55c307f0-4cc3-463d-8bd6-28e95f5e', 'course_name': 'test-test-55c307f0-4cc3-463d-8bd6-28e95f5e course name', 'course_id': 838, 'admin_email': 'simsong+admin+test-d300@gmail.com', 'admin_id': 2471, 'demo_mail': 'demo+admin+test-8671@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'user_email': 'simsong+test-ff0247@gmail.com', 'user_id': 2473, 'movie_id': 2915, 'movie_title': 'test-movie title 718947ee-b50d-48c2-9229-94f10b02c754'}
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:db.py:1025 set_user_id=None set_movie_id=2915 prop=title value=special new title 764828a4-28b6-4f6f-816f-f2c55fe242be
DEBUG    root:db.py:111 set_metadata({"user_id": 2473, "set_movie_id": 2915, "set_user_id": null, "prop": "title", "value": "special new title 764828a4-28b6-4f6f-816f-f2c55fe242be", "args": []}) = 1 
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:db.py:1025 set_user_id=None set_movie_id=2915 prop=description value=special new description 90714e7e-27a3-4deb-abba-706446137431
DEBUG    root:db.py:111 set_metadata({"user_id": 2473, "set_movie_id": 2915, "set_user_id": null, "prop": "description", "value": "special new description 90714e7e-27a3-4deb-abba-706446137431", "args": []}) = 1 
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 6, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 7, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:db.py:1025 set_user_id=None set_movie_id=2915 prop=deleted value=1
DEBUG    root:db.py:111 set_metadata({"user_id": 2473, "set_movie_id": 2915, "set_user_id": null, "prop": "deleted", "value": "1", "args": []}) = 1 
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 8, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 9, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:db.py:1025 set_user_id=None set_movie_id=2915 prop=deleted value=0
DEBUG    root:db.py:111 set_metadata({"user_id": 2473, "set_movie_id": 2915, "set_user_id": null, "prop": "deleted", "value": "0", "args": []}) = 1 
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 10, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 11, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 12, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:db.py:1025 set_user_id=None set_movie_id=2915 prop=published value=1
DEBUG    root:db.py:111 set_metadata({"user_id": 2473, "set_movie_id": 2915, "set_user_id": null, "prop": "published", "value": "1", "args": []}) = 0 
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 13, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [ 70%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = null 
DEBUG    root:db.py:178 validate_api_key(477f891ee7f94e66893b5f55bd06c54f)=[OrderedDict({'id': 2473, 'user_id': 2473, 'api_key': '477f891ee7f94e66893b5f55bd06c54f', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 14, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ff0247@gmail.com', 'primary_course_id': 838, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2473, "movie_id": 2915, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2915, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2915
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2915, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2915
INFO     root:db_object.py:207 delete_object(db://object_store/838/2915-f396.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/838/2915-f396.mov o=ParseResult(scheme='db', netloc='object_store', path='/838/2915-f396.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2915, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2915, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["477f891ee7f94e66893b5f55bd06c54f"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-ff0247@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-d300@gmail.com", "course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-d300@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2912
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2912, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2912
INFO     root:db_object.py:207 delete_object(db://object_store/838/2912-24bb.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/838/2912-24bb.mov o=ParseResult(scheme='db', netloc='object_store', path='/838/2912-24bb.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2912, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2912, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2913
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2913, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2913
INFO     root:db_object.py:207 delete_object(db://object_store/838/2913-3bc7.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/838/2913-3bc7.mov o=ParseResult(scheme='db', netloc='object_store', path='/838/2913-3bc7.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2913, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2913, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2914
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2914, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2914
INFO     root:db_object.py:207 delete_object(db://object_store/838/2914-a2ea.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/838/2914-a2ea.mov o=ParseResult(scheme='db', netloc='object_store', path='/838/2914-a2ea.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2914, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2914, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-8671@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-55c307f0-4cc3-463d-8bd6-28e95f5e", "args": []}) = 1 

tests/movie_test.py::test_movie_extract1 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "course_name": "test-test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73 course name", "max_enrollment": 10, "args": []}) = {"course_id": 839} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-6ce0@gmail.com", "course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "name": "Dr. Admin", "args": []}) = {"id": 2474, "name": "Dr. Admin", "email": "simsong+admin+test-6ce0@gmail.com", "primary_course_id": 839, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2474, "course_id": 839} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-6ce0@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-6ce0@gmail.com user_id=2474
INFO     root:db.py:469 course_id=839
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-6ce0@gmail.com", "course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "args": []}) = {"user_id": 2474, "course_id": 839} 
INFO     root:dbmaint.py:261 generated course_key=test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73  admin_email=simsong+admin+test-6ce0@gmail.com admin_id=2474
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-606b@gmail.com", "course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2475, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-606b@gmail.com", "primary_course_id": 839, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 1, "user_id": 2475, "course_id": 839} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-606b@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-606b@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2475, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2916 
DEBUG    root:db.py:672 purge_movie_data movie_id=2916
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2916, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2916
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2916, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2916
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2916, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2916, "args": []}) = [{"movie_id": 2916, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2475, "course_id": 839, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2916-02a0.mov
INFO     root:db_object.py:187 write_object(db://object_store/839/2916-02a0.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2475, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2917 
DEBUG    root:db.py:672 purge_movie_data movie_id=2917
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2917, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2917
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2917, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2917
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2917, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2917, "args": []}) = [{"movie_id": 2917, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2475, "course_id": 839, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2917-5fb0.mov
INFO     root:db_object.py:187 write_object(db://object_store/839/2917-5fb0.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2475, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2918 
DEBUG    root:db.py:672 purge_movie_data movie_id=2918
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2918, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2918
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2918, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2918
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2918, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2918, "args": []}) = [{"movie_id": 2918, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2475, "course_id": 839, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2918-6c3f.mov
INFO     root:db_object.py:187 write_object(db://object_store/839/2918-6c3f.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-feb647@gmail.com", "course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "name": "Test User Name", "args": []}) = {"id": 2476, "name": "Test User Name", "email": "simsong+test-feb647@gmail.com", "primary_course_id": 839, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2476, "course_id": 839} 
INFO     root:user_test.py:98 generated user_email=simsong+test-feb647@gmail.com user_id=2476
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-feb647@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-feb647@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key e41540eec98a4b888a8dcb72956a08f1invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key 'e41540eec98a4b888a8dcb72956a08f1invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key 'e41540eec98a4b888a8dcb72956a08f1invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1)=[OrderedDict({'id': 2476, 'user_id': 2476, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-feb647@gmail.com', 'primary_course_id': 839, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1)=[OrderedDict({'id': 2476, 'user_id': 2476, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-feb647@gmail.com', 'primary_course_id': 839, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2476, "title": "test-movie title f58e5879-fff6-49e1-aebc-2c722d79a8a2", "description": "test movie description", "args": []}) = 2919 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2919, "args": []}) = [{"movie_id": 2919, "title": "test-movie title f58e5879-fff6-49e1-aebc-2c722d79a8a2", "description": "test movie description", "created_at": 1746035459, "user_id": 2476, "course_id": 839, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2919-f8ef.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2919
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '839/2919-f8ef.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2919-f8ef.mov
INFO     root:db_object.py:187 write_object(db://object_store/839/2919-f8ef.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2919 zipfile=False what=movie_data_urn urn=db://object_store/839/2919-f8ef.mov
INFO     root:db_object.py:160 read_object(db://object_store/839/2919-f8ef.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/839/2919-f8ef.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2919-f8ef.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2919, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73', 'course_name': 'test-test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73 course name', 'course_id': 839, 'admin_email': 'simsong+admin+test-6ce0@gmail.com', 'admin_id': 2474, 'demo_mail': 'demo+admin+test-606b@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'user_email': 'simsong+test-feb647@gmail.com', 'user_id': 2476, 'movie_id': 2919, 'movie_title': 'test-movie title f58e5879-fff6-49e1-aebc-2c722d79a8a2'}
-------------------------------- live log call ---------------------------------
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:apikey.py:120 api_key from request.cookies cookie_name=api_key-actions_test api_key=None
INFO     root:apikey.py:130 api_key is none or invalid. request=/api/get-frame?
DEBUG    root:movie_test.py:335 test_movie_extract1: point1
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1)=[OrderedDict({'id': 2476, 'user_id': 2476, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-feb647@gmail.com', 'primary_course_id': 839, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:400 getframe 1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2476, "movie_id": 2919, "args": []}) = true 
DEBUG    root:bottle_api.py:405 getframe 2
DEBUG    root:movie_test.py:345 test_movie_extract1: point2
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1)=[OrderedDict({'id': 2476, 'user_id': 2476, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-feb647@gmail.com', 'primary_course_id': 839, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:400 getframe 1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2476, "movie_id": 2919, "args": []}) = true 
DEBUG    root:bottle_api.py:405 getframe 2
DEBUG    root:bottle_api.py:409 getframe 3
DEBUG    root:db.py:111 get_frame_urn({"movie_id": 2919, "frame_number": 0, "args": []}) = null 
DEBUG    root:bottle_api.py:414 getframe 5
INFO     root:db.py:540 movie_id=2919 zipfile=False what=movie_data_urn urn=db://object_store/839/2919-f8ef.mov
INFO     root:db_object.py:160 read_object(db://object_store/839/2919-f8ef.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/839/2919-f8ef.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2919-f8ef.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2919, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2919 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2919, "prop": "fps", "value": 20.0, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2919 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2919, "prop": "width", "value": 480, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2919 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2919, "prop": "height", "value": 360, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2919 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2919, "prop": "total_frames", "value": 54, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2919 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2919, "prop": "total_bytes", "value": 235944, "args": []}) = 1 
DEBUG    root:db.py:741 create_new_frame(movie_id=2919, frame_number=0, type(frame_data)=<class 'bytes'>
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/839/2919/000000-5ddc.jpg
INFO     root:db_object.py:187 write_object(db://object_store/839/2919/000000-5ddc.jpg,len=19919)
DEBUG    root:db.py:760 a1=, frame_urn a2=,%s a3=,frame_urn=%s args=(2919, 0, 'db://object_store/839/2919/000000-5ddc.jpg', 'db://object_store/839/2919/000000-5ddc.jpg')
DEBUG    root:bottle_api.py:418 getframe 4
DEBUG    root:bottle_api.py:419 api_get_frame urn=db://object_store/839/2919/000000-5ddc.jpg
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/839/2919/000000-5ddc.jpg
DEBUG    root:bottle_api.py:421 api_get_frame url=/api/get-object?urn=db%3A%2F%2Fobject_store%2F839%2F2919%2F000000-5ddc.jpg&sig=b90ec8f04212715ea2bb5d97c9ab9b337f2c9b4f7ef6da9841b992dbfa1c80a2
DEBUG    root:bottle_api.py:422 getframe 10 
PASSED                                                                   [ 72%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = null 
DEBUG    root:db.py:178 validate_api_key(e41540eec98a4b888a8dcb72956a08f1)=[OrderedDict({'id': 2476, 'user_id': 2476, 'api_key': 'e41540eec98a4b888a8dcb72956a08f1', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-feb647@gmail.com', 'primary_course_id': 839, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2476, "movie_id": 2919, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2919, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2919
INFO     root:db_object.py:207 delete_object(db://object_store/839/2919/000000-5ddc.jpg)
DEBUG    root:db_object.py:209 urn=db://object_store/839/2919/000000-5ddc.jpg o=ParseResult(scheme='db', netloc='object_store', path='/839/2919/000000-5ddc.jpg', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2919, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2919
INFO     root:db_object.py:207 delete_object(db://object_store/839/2919-f8ef.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/839/2919-f8ef.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2919-f8ef.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2919, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2919, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["e41540eec98a4b888a8dcb72956a08f1"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-feb647@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-6ce0@gmail.com", "course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-6ce0@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2916
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2916, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2916
INFO     root:db_object.py:207 delete_object(db://object_store/839/2916-02a0.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/839/2916-02a0.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2916-02a0.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2916, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2916, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2917
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2917, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2917
INFO     root:db_object.py:207 delete_object(db://object_store/839/2917-5fb0.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/839/2917-5fb0.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2917-5fb0.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2917, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2917, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2918
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2918, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2918
INFO     root:db_object.py:207 delete_object(db://object_store/839/2918-6c3f.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/839/2918-6c3f.mov o=ParseResult(scheme='db', netloc='object_store', path='/839/2918-6c3f.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2918, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2918, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-606b@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-1d38b2e1-ed3f-4d6c-9fd0-17f06d73", "args": []}) = 1 

tests/movie_test.py::test_movie_extract2 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-712a270c-12f5-413b-b196-0abb8075", "course_name": "test-test-712a270c-12f5-413b-b196-0abb8075 course name", "max_enrollment": 10, "args": []}) = {"course_id": 840} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-9fec@gmail.com", "course_key": "test-712a270c-12f5-413b-b196-0abb8075", "name": "Dr. Admin", "args": []}) = {"id": 2477, "name": "Dr. Admin", "email": "simsong+admin+test-9fec@gmail.com", "primary_course_id": 840, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2477, "course_id": 840} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-9fec@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-9fec@gmail.com user_id=2477
INFO     root:db.py:469 course_id=840
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-9fec@gmail.com", "course_key": "test-712a270c-12f5-413b-b196-0abb8075", "args": []}) = {"user_id": 2477, "course_id": 840} 
INFO     root:dbmaint.py:261 generated course_key=test-712a270c-12f5-413b-b196-0abb8075  admin_email=simsong+admin+test-9fec@gmail.com admin_id=2477
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-f3b8@gmail.com", "course_key": "test-712a270c-12f5-413b-b196-0abb8075", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2478, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-f3b8@gmail.com", "primary_course_id": 840, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 1, "user_id": 2478, "course_id": 840} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-f3b8@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-f3b8@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2478, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2920 
DEBUG    root:db.py:672 purge_movie_data movie_id=2920
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2920, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2920
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2920, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2920
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2920, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2920, "args": []}) = [{"movie_id": 2920, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2478, "course_id": 840, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2920-b07b.mov
INFO     root:db_object.py:187 write_object(db://object_store/840/2920-b07b.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2478, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2921 
DEBUG    root:db.py:672 purge_movie_data movie_id=2921
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2921, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2921
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2921, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2921
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2921, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2921, "args": []}) = [{"movie_id": 2921, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2478, "course_id": 840, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2921-2ab4.mov
INFO     root:db_object.py:187 write_object(db://object_store/840/2921-2ab4.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2478, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2922 
DEBUG    root:db.py:672 purge_movie_data movie_id=2922
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2922, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2922
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2922, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2922
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2922, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2922, "args": []}) = [{"movie_id": 2922, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2478, "course_id": 840, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2922-afac.mov
INFO     root:db_object.py:187 write_object(db://object_store/840/2922-afac.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-bfcd90@gmail.com", "course_key": "test-712a270c-12f5-413b-b196-0abb8075", "name": "Test User Name", "args": []}) = {"id": 2479, "name": "Test User Name", "email": "simsong+test-bfcd90@gmail.com", "primary_course_id": 840, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2479, "course_id": 840} 
INFO     root:user_test.py:98 generated user_email=simsong+test-bfcd90@gmail.com user_id=2479
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-bfcd90@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-bfcd90@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key 7c443a30dfe940e59c33eee2539e1284invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key '7c443a30dfe940e59c33eee2539e1284invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key '7c443a30dfe940e59c33eee2539e1284invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2479, "title": "test-movie title 42637be5-2f8e-49ba-99fb-fc8b7951f9be", "description": "test movie description", "args": []}) = 2923 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2923, "args": []}) = [{"movie_id": 2923, "title": "test-movie title 42637be5-2f8e-49ba-99fb-fc8b7951f9be", "description": "test movie description", "created_at": 1746035459, "user_id": 2479, "course_id": 840, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2923-12b3.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2923
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '840/2923-12b3.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:187 write_object(db://object_store/840/2923-12b3.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2923 zipfile=False what=movie_data_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:160 read_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2923, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-712a270c-12f5-413b-b196-0abb8075', 'course_name': 'test-test-712a270c-12f5-413b-b196-0abb8075 course name', 'course_id': 840, 'admin_email': 'simsong+admin+test-9fec@gmail.com', 'admin_id': 2477, 'demo_mail': 'demo+admin+test-f3b8@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'user_email': 'simsong+test-bfcd90@gmail.com', 'user_id': 2479, 'movie_id': 2923, 'movie_title': 'test-movie title 42637be5-2f8e-49ba-99fb-fc8b7951f9be'}
-------------------------------- live log call ---------------------------------
INFO     root:db.py:540 movie_id=2923 zipfile=False what=movie_data_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:160 read_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2923, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:370 len(data)=19919
DEBUG    root:movie_test.py:370 len(data)=20060
DEBUG    root:movie_test.py:370 len(data)=20507
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:400 getframe 1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2479, "movie_id": 2923, "args": []}) = true 
DEBUG    root:bottle_api.py:405 getframe 2
DEBUG    root:bottle_api.py:409 getframe 3
DEBUG    root:db.py:111 get_frame_urn({"movie_id": 2923, "frame_number": 0, "args": []}) = null 
DEBUG    root:bottle_api.py:414 getframe 5
INFO     root:db.py:540 movie_id=2923 zipfile=False what=movie_data_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:160 read_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2923, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "fps", "value": 20.0, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "width", "value": 480, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "height", "value": 360, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_frames", "value": 54, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_bytes", "value": 235944, "args": []}) = 1 
DEBUG    root:db.py:741 create_new_frame(movie_id=2923, frame_number=0, type(frame_data)=<class 'bytes'>
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2923/000000-bd94.jpg
INFO     root:db_object.py:187 write_object(db://object_store/840/2923/000000-bd94.jpg,len=19919)
DEBUG    root:db.py:760 a1=, frame_urn a2=,%s a3=,frame_urn=%s args=(2923, 0, 'db://object_store/840/2923/000000-bd94.jpg', 'db://object_store/840/2923/000000-bd94.jpg')
DEBUG    root:bottle_api.py:418 getframe 4
DEBUG    root:bottle_api.py:419 api_get_frame urn=db://object_store/840/2923/000000-bd94.jpg
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/840/2923/000000-bd94.jpg
DEBUG    root:bottle_api.py:421 api_get_frame url=/api/get-object?urn=db%3A%2F%2Fobject_store%2F840%2F2923%2F000000-bd94.jpg&sig=6c14b34cc03a265066ef9ec4509d79321f469b59fc01e93dfda4eb1320103d37
DEBUG    root:bottle_api.py:422 getframe 10 
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:400 getframe 1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2479, "movie_id": 2923, "args": []}) = true 
DEBUG    root:bottle_api.py:405 getframe 2
DEBUG    root:bottle_api.py:409 getframe 3
DEBUG    root:db.py:111 get_frame_urn({"movie_id": 2923, "frame_number": 1, "args": []}) = null 
DEBUG    root:bottle_api.py:414 getframe 5
INFO     root:db.py:540 movie_id=2923 zipfile=False what=movie_data_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:160 read_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2923, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "fps", "value": 20.0, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "width", "value": 480, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "height", "value": 360, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_frames", "value": 54, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_bytes", "value": 235944, "args": []}) = 0 
DEBUG    root:db.py:741 create_new_frame(movie_id=2923, frame_number=1, type(frame_data)=<class 'bytes'>
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2923/000001-c6a1.jpg
INFO     root:db_object.py:187 write_object(db://object_store/840/2923/000001-c6a1.jpg,len=20060)
DEBUG    root:db.py:760 a1=, frame_urn a2=,%s a3=,frame_urn=%s args=(2923, 1, 'db://object_store/840/2923/000001-c6a1.jpg', 'db://object_store/840/2923/000001-c6a1.jpg')
DEBUG    root:bottle_api.py:418 getframe 4
DEBUG    root:bottle_api.py:419 api_get_frame urn=db://object_store/840/2923/000001-c6a1.jpg
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/840/2923/000001-c6a1.jpg
DEBUG    root:bottle_api.py:421 api_get_frame url=/api/get-object?urn=db%3A%2F%2Fobject_store%2F840%2F2923%2F000001-c6a1.jpg&sig=03765b0d4e6c11373f1523a269a2693d472dd1dfa8d8777f455eeed3b6dc0e74
DEBUG    root:bottle_api.py:422 getframe 10 
DEBUG    root:bottle_api.py:395 getframe 0
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:400 getframe 1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2479, "movie_id": 2923, "args": []}) = true 
DEBUG    root:bottle_api.py:405 getframe 2
DEBUG    root:bottle_api.py:409 getframe 3
DEBUG    root:db.py:111 get_frame_urn({"movie_id": 2923, "frame_number": 2, "args": []}) = null 
DEBUG    root:bottle_api.py:414 getframe 5
INFO     root:db.py:540 movie_id=2923 zipfile=False what=movie_data_urn urn=db://object_store/840/2923-12b3.mov
INFO     root:db_object.py:160 read_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2923, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "fps", "value": 20.0, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "width", "value": 480, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "height", "value": 360, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_frames", "value": 54, "args": []}) = 0 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2923 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 0, "set_movie_id": 2923, "prop": "total_bytes", "value": 235944, "args": []}) = 0 
DEBUG    root:db.py:741 create_new_frame(movie_id=2923, frame_number=2, type(frame_data)=<class 'bytes'>
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/840/2923/000002-16c0.jpg
INFO     root:db_object.py:187 write_object(db://object_store/840/2923/000002-16c0.jpg,len=20507)
DEBUG    root:db.py:760 a1=, frame_urn a2=,%s a3=,frame_urn=%s args=(2923, 2, 'db://object_store/840/2923/000002-16c0.jpg', 'db://object_store/840/2923/000002-16c0.jpg')
DEBUG    root:bottle_api.py:418 getframe 4
DEBUG    root:bottle_api.py:419 api_get_frame urn=db://object_store/840/2923/000002-16c0.jpg
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/840/2923/000002-16c0.jpg
DEBUG    root:bottle_api.py:421 api_get_frame url=/api/get-object?urn=db%3A%2F%2Fobject_store%2F840%2F2923%2F000002-16c0.jpg&sig=e41193a9b7ae4bb0509bb1304c7cba61eb24403a97a7f0c99ecc8fb7a4a18762
DEBUG    root:bottle_api.py:422 getframe 10 
PASSED                                                                   [ 74%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = null 
DEBUG    root:db.py:178 validate_api_key(7c443a30dfe940e59c33eee2539e1284)=[OrderedDict({'id': 2479, 'user_id': 2479, 'api_key': '7c443a30dfe940e59c33eee2539e1284', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-bfcd90@gmail.com', 'primary_course_id': 840, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2479, "movie_id": 2923, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2923, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2923
INFO     root:db_object.py:207 delete_object(db://object_store/840/2923/000000-bd94.jpg)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2923/000000-bd94.jpg o=ParseResult(scheme='db', netloc='object_store', path='/840/2923/000000-bd94.jpg', params='', query='', fragment='')
INFO     root:db_object.py:207 delete_object(db://object_store/840/2923/000001-c6a1.jpg)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2923/000001-c6a1.jpg o=ParseResult(scheme='db', netloc='object_store', path='/840/2923/000001-c6a1.jpg', params='', query='', fragment='')
INFO     root:db_object.py:207 delete_object(db://object_store/840/2923/000002-16c0.jpg)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2923/000002-16c0.jpg o=ParseResult(scheme='db', netloc='object_store', path='/840/2923/000002-16c0.jpg', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2923, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2923
INFO     root:db_object.py:207 delete_object(db://object_store/840/2923-12b3.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2923-12b3.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2923-12b3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2923, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2923, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["7c443a30dfe940e59c33eee2539e1284"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-bfcd90@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-9fec@gmail.com", "course_key": "test-712a270c-12f5-413b-b196-0abb8075", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-9fec@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2920
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2920, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2920
INFO     root:db_object.py:207 delete_object(db://object_store/840/2920-b07b.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2920-b07b.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2920-b07b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2920, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2920, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2921
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2921, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2921
INFO     root:db_object.py:207 delete_object(db://object_store/840/2921-2ab4.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2921-2ab4.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2921-2ab4.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2921, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2921, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2922
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2922, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2922
INFO     root:db_object.py:207 delete_object(db://object_store/840/2922-afac.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/840/2922-afac.mov o=ParseResult(scheme='db', netloc='object_store', path='/840/2922-afac.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2922, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2922, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-f3b8@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-712a270c-12f5-413b-b196-0abb8075", "args": []}) = 1 

tests/movie_test.py::test_log_search_movie 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "course_name": "test-test-58cdb601-dd52-4850-851f-65a38f88 course name", "max_enrollment": 10, "args": []}) = {"course_id": 841} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-871b@gmail.com", "course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "name": "Dr. Admin", "args": []}) = {"id": 2480, "name": "Dr. Admin", "email": "simsong+admin+test-871b@gmail.com", "primary_course_id": 841, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2480, "course_id": 841} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-871b@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-871b@gmail.com user_id=2480
INFO     root:db.py:469 course_id=841
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-871b@gmail.com", "course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "args": []}) = {"user_id": 2480, "course_id": 841} 
INFO     root:dbmaint.py:261 generated course_key=test-58cdb601-dd52-4850-851f-65a38f88  admin_email=simsong+admin+test-871b@gmail.com admin_id=2480
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-41c4@gmail.com", "course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2481, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-41c4@gmail.com", "primary_course_id": 841, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 1, "user_id": 2481, "course_id": 841} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-41c4@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-41c4@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2481, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2924 
DEBUG    root:db.py:672 purge_movie_data movie_id=2924
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2924, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2924
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2924, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2924
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2924, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2924, "args": []}) = [{"movie_id": 2924, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2481, "course_id": 841, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/841/2924-701a.mov
INFO     root:db_object.py:187 write_object(db://object_store/841/2924-701a.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2481, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2925 
DEBUG    root:db.py:672 purge_movie_data movie_id=2925
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2925, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2925
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2925, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2925
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2925, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2925, "args": []}) = [{"movie_id": 2925, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2481, "course_id": 841, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/841/2925-1121.mov
INFO     root:db_object.py:187 write_object(db://object_store/841/2925-1121.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2481, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2926 
DEBUG    root:db.py:672 purge_movie_data movie_id=2926
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2926, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2926
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2926, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2926
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2926, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2926, "args": []}) = [{"movie_id": 2926, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2481, "course_id": 841, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/841/2926-ee91.mov
INFO     root:db_object.py:187 write_object(db://object_store/841/2926-ee91.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-3c0376@gmail.com", "course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "name": "Test User Name", "args": []}) = {"id": 2482, "name": "Test User Name", "email": "simsong+test-3c0376@gmail.com", "primary_course_id": 841, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2482, "course_id": 841} 
INFO     root:user_test.py:98 generated user_email=simsong+test-3c0376@gmail.com user_id=2482
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-3c0376@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-3c0376@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["3306802b454c4252a61c1cbd0772cc0cinvalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(3306802b454c4252a61c1cbd0772cc0cinvalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key 3306802b454c4252a61c1cbd0772cc0cinvalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key '3306802b454c4252a61c1cbd0772cc0cinvalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key '3306802b454c4252a61c1cbd0772cc0cinvalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["3306802b454c4252a61c1cbd0772cc0c"]}) = null 
DEBUG    root:db.py:178 validate_api_key(3306802b454c4252a61c1cbd0772cc0c)=[OrderedDict({'id': 2482, 'user_id': 2482, 'api_key': '3306802b454c4252a61c1cbd0772cc0c', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-3c0376@gmail.com', 'primary_course_id': 841, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["3306802b454c4252a61c1cbd0772cc0c"]}) = null 
DEBUG    root:db.py:178 validate_api_key(3306802b454c4252a61c1cbd0772cc0c)=[OrderedDict({'id': 2482, 'user_id': 2482, 'api_key': '3306802b454c4252a61c1cbd0772cc0c', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-3c0376@gmail.com', 'primary_course_id': 841, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2482, "title": "test-movie title 0d3ac95f-8634-41e0-b88a-94f5f3c69e61", "description": "test movie description", "args": []}) = 2927 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2927, "args": []}) = [{"movie_id": 2927, "title": "test-movie title 0d3ac95f-8634-41e0-b88a-94f5f3c69e61", "description": "test movie description", "created_at": 1746035459, "user_id": 2482, "course_id": 841, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/841/2927-ce55.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2927
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '841/2927-ce55.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/841/2927-ce55.mov
INFO     root:db_object.py:187 write_object(db://object_store/841/2927-ce55.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2927 zipfile=False what=movie_data_urn urn=db://object_store/841/2927-ce55.mov
INFO     root:db_object.py:160 read_object(db://object_store/841/2927-ce55.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/841/2927-ce55.mov o=ParseResult(scheme='db', netloc='object_store', path='/841/2927-ce55.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2927, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-58cdb601-dd52-4850-851f-65a38f88', 'course_name': 'test-test-58cdb601-dd52-4850-851f-65a38f88 course name', 'course_id': 841, 'admin_email': 'simsong+admin+test-871b@gmail.com', 'admin_id': 2480, 'demo_mail': 'demo+admin+test-41c4@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': '3306802b454c4252a61c1cbd0772cc0c', 'user_email': 'simsong+test-3c0376@gmail.com', 'user_id': 2482, 'movie_id': 2927, 'movie_title': 'test-movie title 0d3ac95f-8634-41e0-b88a-94f5f3c69e61'}
-------------------------------- live log call ---------------------------------
INFO     root:movie_test.py:409 log entries for movie:
PASSED                                                                   [ 76%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["3306802b454c4252a61c1cbd0772cc0c"]}) = null 
DEBUG    root:db.py:178 validate_api_key(3306802b454c4252a61c1cbd0772cc0c)=[OrderedDict({'id': 2482, 'user_id': 2482, 'api_key': '3306802b454c4252a61c1cbd0772cc0c', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-3c0376@gmail.com', 'primary_course_id': 841, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2482, "movie_id": 2927, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2927, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2927
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2927, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2927
INFO     root:db_object.py:207 delete_object(db://object_store/841/2927-ce55.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/841/2927-ce55.mov o=ParseResult(scheme='db', netloc='object_store', path='/841/2927-ce55.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2927, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2927, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["3306802b454c4252a61c1cbd0772cc0c"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-3c0376@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-871b@gmail.com", "course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-871b@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2924
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2924, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2924
INFO     root:db_object.py:207 delete_object(db://object_store/841/2924-701a.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/841/2924-701a.mov o=ParseResult(scheme='db', netloc='object_store', path='/841/2924-701a.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2924, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2924, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2925
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2925, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2925
INFO     root:db_object.py:207 delete_object(db://object_store/841/2925-1121.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/841/2925-1121.mov o=ParseResult(scheme='db', netloc='object_store', path='/841/2925-1121.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2925, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2925, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2926
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2926, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2926
INFO     root:db_object.py:207 delete_object(db://object_store/841/2926-ee91.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/841/2926-ee91.mov o=ParseResult(scheme='db', netloc='object_store', path='/841/2926-ee91.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2926, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2926, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-41c4@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-58cdb601-dd52-4850-851f-65a38f88", "args": []}) = 1 

tests/movie_tracker_test.py::test_track_point_annotations 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "course_name": "test-test-d3067787-589d-4dde-963f-2aff47c6 course name", "max_enrollment": 10, "args": []}) = {"course_id": 842} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-1044@gmail.com", "course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "name": "Dr. Admin", "args": []}) = {"id": 2483, "name": "Dr. Admin", "email": "simsong+admin+test-1044@gmail.com", "primary_course_id": 842, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2483, "course_id": 842} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-1044@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-1044@gmail.com user_id=2483
INFO     root:db.py:469 course_id=842
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-1044@gmail.com", "course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "args": []}) = {"user_id": 2483, "course_id": 842} 
INFO     root:dbmaint.py:261 generated course_key=test-d3067787-589d-4dde-963f-2aff47c6  admin_email=simsong+admin+test-1044@gmail.com admin_id=2483
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-1852@gmail.com", "course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2484, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-1852@gmail.com", "primary_course_id": 842, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 1, "user_id": 2484, "course_id": 842} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-1852@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-1852@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2484, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2928 
DEBUG    root:db.py:672 purge_movie_data movie_id=2928
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2928, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2928
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2928, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2928
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2928, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2928, "args": []}) = [{"movie_id": 2928, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2484, "course_id": 842, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/842/2928-e5e1.mov
INFO     root:db_object.py:187 write_object(db://object_store/842/2928-e5e1.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2484, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2929 
DEBUG    root:db.py:672 purge_movie_data movie_id=2929
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2929, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2929
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2929, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2929
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2929, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2929, "args": []}) = [{"movie_id": 2929, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2484, "course_id": 842, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/842/2929-f53a.mov
INFO     root:db_object.py:187 write_object(db://object_store/842/2929-f53a.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2484, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2930 
DEBUG    root:db.py:672 purge_movie_data movie_id=2930
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2930, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2930
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2930, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2930
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2930, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2930, "args": []}) = [{"movie_id": 2930, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2484, "course_id": 842, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/842/2930-dca3.mov
INFO     root:db_object.py:187 write_object(db://object_store/842/2930-dca3.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-6aa2e0@gmail.com", "course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "name": "Test User Name", "args": []}) = {"id": 2485, "name": "Test User Name", "email": "simsong+test-6aa2e0@gmail.com", "primary_course_id": 842, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2485, "course_id": 842} 
INFO     root:user_test.py:98 generated user_email=simsong+test-6aa2e0@gmail.com user_id=2485
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-6aa2e0@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-6aa2e0@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(290a3b42a94e4dab8d4aca15699d7328invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key 290a3b42a94e4dab8d4aca15699d7328invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key '290a3b42a94e4dab8d4aca15699d7328invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key '290a3b42a94e4dab8d4aca15699d7328invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328"]}) = null 
DEBUG    root:db.py:178 validate_api_key(290a3b42a94e4dab8d4aca15699d7328)=[OrderedDict({'id': 2485, 'user_id': 2485, 'api_key': '290a3b42a94e4dab8d4aca15699d7328', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-6aa2e0@gmail.com', 'primary_course_id': 842, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328"]}) = null 
DEBUG    root:db.py:178 validate_api_key(290a3b42a94e4dab8d4aca15699d7328)=[OrderedDict({'id': 2485, 'user_id': 2485, 'api_key': '290a3b42a94e4dab8d4aca15699d7328', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-6aa2e0@gmail.com', 'primary_course_id': 842, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2485, "title": "test-movie title 92e8e6b7-bf59-42c3-8399-2358f5e2d89b", "description": "test movie description", "args": []}) = 2931 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2931, "args": []}) = [{"movie_id": 2931, "title": "test-movie title 92e8e6b7-bf59-42c3-8399-2358f5e2d89b", "description": "test movie description", "created_at": 1746035459, "user_id": 2485, "course_id": 842, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/842/2931-8a8b.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2931
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '842/2931-8a8b.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/842/2931-8a8b.mov
INFO     root:db_object.py:187 write_object(db://object_store/842/2931-8a8b.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2931 zipfile=False what=movie_data_urn urn=db://object_store/842/2931-8a8b.mov
INFO     root:db_object.py:160 read_object(db://object_store/842/2931-8a8b.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/842/2931-8a8b.mov o=ParseResult(scheme='db', netloc='object_store', path='/842/2931-8a8b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2931, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-d3067787-589d-4dde-963f-2aff47c6', 'course_name': 'test-test-d3067787-589d-4dde-963f-2aff47c6 course name', 'course_id': 842, 'admin_email': 'simsong+admin+test-1044@gmail.com', 'admin_id': 2483, 'demo_mail': 'demo+admin+test-1852@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': '290a3b42a94e4dab8d4aca15699d7328', 'user_email': 'simsong+test-6aa2e0@gmail.com', 'user_id': 2485, 'movie_id': 2931, 'movie_title': 'test-movie title 92e8e6b7-bf59-42c3-8399-2358f5e2d89b'}
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:741 create_new_frame(movie_id=2931, frame_number=0, type(frame_data)=<class 'NoneType'>
DEBUG    root:db.py:760 a1= a2= a3= args=(2931, 0)
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2931, 0, 10, 11, 'test-label1', 2931, 0, 20, 21, 'test-label2']
DEBUG    root:movie_tracker_test.py:63 tps[0]=OrderedDict({'frame_number': 0, 'x': 10, 'y': 11, 'label': 'test-label1'})
DEBUG    root:movie_tracker_test.py:64 tp0={'x': 10, 'y': 11, 'label': 'test-label1'}
DEBUG    root:db.py:111 validate_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328"]}) = null 
DEBUG    root:db.py:178 validate_api_key(290a3b42a94e4dab8d4aca15699d7328)=[OrderedDict({'id': 2485, 'user_id': 2485, 'api_key': '290a3b42a94e4dab8d4aca15699d7328', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-6aa2e0@gmail.com', 'primary_course_id': 842, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:801 put_frame_analysis. user_id=2485 movie_id=2931 frame_number=1
DEBUG    root:db.py:111 can_access_movie({"user_id": 2485, "movie_id": 2931, "args": []}) = true 
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2931, 1, 10, 11, 'test-label1', 2931, 1, 20, 21, 'test-label2', 2931, 1, 25, 25, 'test-label3']
PASSED                                                                   [ 78%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328"]}) = null 
DEBUG    root:db.py:178 validate_api_key(290a3b42a94e4dab8d4aca15699d7328)=[OrderedDict({'id': 2485, 'user_id': 2485, 'api_key': '290a3b42a94e4dab8d4aca15699d7328', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-6aa2e0@gmail.com', 'primary_course_id': 842, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2485, "movie_id": 2931, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2931, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2931
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2931, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2931
INFO     root:db_object.py:207 delete_object(db://object_store/842/2931-8a8b.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/842/2931-8a8b.mov o=ParseResult(scheme='db', netloc='object_store', path='/842/2931-8a8b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2931, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2931, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["290a3b42a94e4dab8d4aca15699d7328"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-6aa2e0@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-1044@gmail.com", "course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-1044@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2928
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2928, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2928
INFO     root:db_object.py:207 delete_object(db://object_store/842/2928-e5e1.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/842/2928-e5e1.mov o=ParseResult(scheme='db', netloc='object_store', path='/842/2928-e5e1.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2928, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2928, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2929
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2929, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2929
INFO     root:db_object.py:207 delete_object(db://object_store/842/2929-f53a.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/842/2929-f53a.mov o=ParseResult(scheme='db', netloc='object_store', path='/842/2929-f53a.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2929, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2929, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2930
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2930, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2930
INFO     root:db_object.py:207 delete_object(db://object_store/842/2930-dca3.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/842/2930-dca3.mov o=ParseResult(scheme='db', netloc='object_store', path='/842/2930-dca3.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2930, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2930, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-1852@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-d3067787-589d-4dde-963f-2aff47c6", "args": []}) = 1 

tests/movie_tracker_test.py::test_movie_tracking 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "course_name": "test-test-2b9e7e37-fa1f-4859-b998-98749ecf course name", "max_enrollment": 10, "args": []}) = {"course_id": 843} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-a25d@gmail.com", "course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "name": "Dr. Admin", "args": []}) = {"id": 2486, "name": "Dr. Admin", "email": "simsong+admin+test-a25d@gmail.com", "primary_course_id": 843, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2486, "course_id": 843} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-a25d@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-a25d@gmail.com user_id=2486
INFO     root:db.py:469 course_id=843
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-a25d@gmail.com", "course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "args": []}) = {"user_id": 2486, "course_id": 843} 
INFO     root:dbmaint.py:261 generated course_key=test-2b9e7e37-fa1f-4859-b998-98749ecf  admin_email=simsong+admin+test-a25d@gmail.com admin_id=2486
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-5a28@gmail.com", "course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2487, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-5a28@gmail.com", "primary_course_id": 843, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 1, "user_id": 2487, "course_id": 843} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-5a28@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-5a28@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2487, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2932 
DEBUG    root:db.py:672 purge_movie_data movie_id=2932
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2932, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2932
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2932, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2932
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2932, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2932, "args": []}) = [{"movie_id": 2932, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2487, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2932-61ea.mov
INFO     root:db_object.py:187 write_object(db://object_store/843/2932-61ea.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2487, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2933 
DEBUG    root:db.py:672 purge_movie_data movie_id=2933
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2933, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2933
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2933, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2933
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2933, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2933, "args": []}) = [{"movie_id": 2933, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2487, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2933-ce43.mov
INFO     root:db_object.py:187 write_object(db://object_store/843/2933-ce43.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2487, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2934 
DEBUG    root:db.py:672 purge_movie_data movie_id=2934
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2934, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2934
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2934, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2934
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2934, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2934, "args": []}) = [{"movie_id": 2934, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035459, "user_id": 2487, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2934-fc86.mov
INFO     root:db_object.py:187 write_object(db://object_store/843/2934-fc86.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-ec9546@gmail.com", "course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "name": "Test User Name", "args": []}) = {"id": 2488, "name": "Test User Name", "email": "simsong+test-ec9546@gmail.com", "primary_course_id": 843, "created_at": 1746035459, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:59", "demo": 0, "user_id": 2488, "course_id": 843} 
INFO     root:user_test.py:98 generated user_email=simsong+test-ec9546@gmail.com user_id=2488
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-ec9546@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-ec9546@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:movie_test.py:74 new_movie fixture: Opening /Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37invalid"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37invalid)=[] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:apikey.py:137 api_key f569696a0ee54203ae3581906b4a0d37invalid is invalid  ipaddr=10.0.0.1 request.url=http://localhost/api/new-movie
DEBUG    root:movie_test.py:87 invalid api_key resp=<WrapperTestResponse streamed [403 FORBIDDEN]>
DEBUG    root:movie_test.py:88 invalid api_key resp.text={"error":true,"message":"api_key 'f569696a0ee54203ae3581906b4a0d37invalid' is invalid"}

DEBUG    root:movie_test.py:89 invalid api_key resp.json={'error': True, 'message': "api_key 'f569696a0ee54203ae3581906b4a0d37invalid' is invalid"}
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035459, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
INFO     root:bottle_api.py:241 api_new_movie
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 create_new_movie({"user_id": 2488, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "args": []}) = 2935 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2935, "args": []}) = [{"movie_id": 2935, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "created_at": 1746035459, "user_id": 2488, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2935-92c9.mov
DEBUG    root:movie_test.py:112 new_movie fixture: movie_id=2935
DEBUG    root:movie_test.py:119 new_movie fixture: url=/api/upload-movie fields={'key': '843/2935-92c9.mov', 'mime_type': 'video/mp4', 'scheme': 'db', 'sha256': '2db3aea97ce726b62fca9e83f6766a09e27794b54df6c9828e5c84da81676de4'}
INFO     root:bottle_api.py:278 info
ERROR    root:bottle_api.py:279 error
DEBUG    root:bottle_api.py:283 api_upload_movie: request=<Request 'http://localhost/api/upload-movie' [POST]> request.files=ImmutableMultiDict([('file', <FileStorage: '/Users/sbarber/git/Plant-Tracer/webapp/tests/data/2019-07-31 plantmovie.mov' ('video/quicktime')>)]) 
DEBUG    root:bottle_api.py:290 len(movie_data)=235944
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2935-92c9.mov
INFO     root:db_object.py:187 write_object(db://object_store/843/2935-92c9.mov,len=235944)
DEBUG    root:movie_test.py:140 new_movie fixture: movie uploaded
INFO     root:db.py:540 movie_id=2935 zipfile=False what=movie_data_urn urn=db://object_store/843/2935-92c9.mov
INFO     root:db_object.py:160 read_object(db://object_store/843/2935-92c9.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/843/2935-92c9.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2935-92c9.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2935, "args": []}) = {"log_size": 833594, "error": true} 
DEBUG    root:movie_test.py:144 new_movie fixture: yield {'course_key': 'test-2b9e7e37-fa1f-4859-b998-98749ecf', 'course_name': 'test-test-2b9e7e37-fa1f-4859-b998-98749ecf course name', 'course_id': 843, 'admin_email': 'simsong+admin+test-a25d@gmail.com', 'admin_id': 2486, 'demo_mail': 'demo+admin+test-5a28@gmail.com', 'dbreader': <DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>, 'dbwriter': <DBMySQLAuth host=localhost database=actions_test user=dbwriter_actions_test prefix= debug=None>, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'user_email': 'simsong+test-ec9546@gmail.com', 'user_id': 2488, 'movie_id': 2935, 'movie_title': 'test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071'}
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 2, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:bottle_api.py:801 put_frame_analysis. user_id=2488 movie_id=2935 frame_number=0
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 0, 275, 215, 'track1', 2935, 0, 410, 175, 'track2']
DEBUG    root:movie_tracker_test.py:123 save trackpoints ret={'error': False, 'message': 'Trackpoints recorded.'}
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 3, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:bottle_api.py:751 calling api_track_movie
INFO     root:db.py:540 movie_id=2935 zipfile=False what=movie_data_urn urn=db://object_store/843/2935-92c9.mov
INFO     root:db_object.py:160 read_object(db://object_store/843/2935-92c9.mov)
DEBUG    root:db_object.py:162 urn=db://object_store/843/2935-92c9.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2935-92c9.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2935, "args": []}) = {"log_size": 833594, "error": true} 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=fps value=20.0
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "fps", "value": 20.0, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=width value=480
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "width", "value": 480, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=height value=360
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "height", "value": 360, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=total_frames value=54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "total_frames", "value": 54, "args": []}) = 1 
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=total_bytes value=235944
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "total_bytes", "value": 235944, "args": []}) = 1 
DEBUG    root:db.py:111 get_movie_metadata({"movie_id": 2935, "user_id": 2488, "args": []}) = [{"movie_id": 2935, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "created_at": 1746035459, "user_id": 2488, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": "20.00", "width": 480, "height": 360, "total_frames": 54, "total_bytes": 235944, "status": null, "movie_data_urn": "db://object_store/843/2935-92c9.mov", "movie_zipfile_urn": null, "tracked_movie_id": null}] 
INFO     root:tracker.py:228 start movie tracking
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=0
DEBUG    root:bottle_api.py:655 appending frame 0 len(frame_jpeg)=10033 to zipfile  len=10033
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 0, 275, 215, 'track1', 2935, 0, 410, 175, 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 1 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 1 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=10033
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=10033
DEBUG    root:bottle_api.py:655 appending frame 1 len(frame_jpeg)=10011 to zipfile  len=20044
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 1, np.float32(272.9206), np.float32(212.30414), 'track1', 2935, 1, np.float32(408.86148), np.float32(174.35219), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 2 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 2 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=20044
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=20044
DEBUG    root:bottle_api.py:655 appending frame 2 len(frame_jpeg)=10104 to zipfile  len=30148
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 2, np.float32(272.23535), np.float32(210.98271), 'track1', 2935, 2, np.float32(408.81808), np.float32(174.13522), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 3 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 3 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=30148
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=30148
DEBUG    root:bottle_api.py:655 appending frame 3 len(frame_jpeg)=10183 to zipfile  len=40331
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 3, np.float32(271.6196), np.float32(209.67574), 'track1', 2935, 3, np.float32(408.7015), np.float32(173.99545), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 4 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 4 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=40331
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=40331
DEBUG    root:bottle_api.py:655 appending frame 4 len(frame_jpeg)=10225 to zipfile  len=50556
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 4, np.float32(270.98788), np.float32(208.26079), 'track1', 2935, 4, np.float32(408.60437), np.float32(173.85446), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 5 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 5 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=50556
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=50556
DEBUG    root:bottle_api.py:655 appending frame 5 len(frame_jpeg)=10340 to zipfile  len=60896
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 5, np.float32(270.42578), np.float32(206.59633), 'track1', 2935, 5, np.float32(408.46048), np.float32(173.6679), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 6 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 6 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=60896
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=60896
DEBUG    root:bottle_api.py:655 appending frame 6 len(frame_jpeg)=10438 to zipfile  len=71334
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 6, np.float32(269.87057), np.float32(204.24641), 'track1', 2935, 6, np.float32(408.33264), np.float32(173.5086), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 7 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 7 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=71334
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=71334
DEBUG    root:bottle_api.py:655 appending frame 7 len(frame_jpeg)=10526 to zipfile  len=81860
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 7, np.float32(269.651), np.float32(201.32832), 'track1', 2935, 7, np.float32(408.31113), np.float32(173.25244), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 8 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 8 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=81860
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=81860
DEBUG    root:bottle_api.py:655 appending frame 8 len(frame_jpeg)=10537 to zipfile  len=92397
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 8, np.float32(269.9114), np.float32(197.75026), 'track1', 2935, 8, np.float32(408.30255), np.float32(172.98645), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 9 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 9 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=92397
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=92397
DEBUG    root:bottle_api.py:655 appending frame 9 len(frame_jpeg)=10541 to zipfile  len=102938
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 9, np.float32(270.79596), np.float32(193.37114), 'track1', 2935, 9, np.float32(408.43588), np.float32(172.4771), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 10 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 10 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=102938
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=102938
DEBUG    root:bottle_api.py:655 appending frame 10 len(frame_jpeg)=10604 to zipfile  len=113542
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 10, np.float32(272.28845), np.float32(188.73012), 'track1', 2935, 10, np.float32(408.65558), np.float32(171.97594), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 11 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 11 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=113542
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=113542
DEBUG    root:bottle_api.py:655 appending frame 11 len(frame_jpeg)=10574 to zipfile  len=124116
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 11, np.float32(273.97565), np.float32(184.32065), 'track1', 2935, 11, np.float32(408.92642), np.float32(171.217), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 12 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 12 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=124116
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=124116
DEBUG    root:bottle_api.py:655 appending frame 12 len(frame_jpeg)=10662 to zipfile  len=134778
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 12, np.float32(275.72836), np.float32(180.51053), 'track1', 2935, 12, np.float32(409.4678), np.float32(170.46107), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 13 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 13 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=134778
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=134778
DEBUG    root:bottle_api.py:655 appending frame 13 len(frame_jpeg)=10659 to zipfile  len=145437
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 13, np.float32(277.4961), np.float32(177.29445), 'track1', 2935, 13, np.float32(409.91028), np.float32(169.6999), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 14 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 14 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=145437
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=145437
DEBUG    root:bottle_api.py:655 appending frame 14 len(frame_jpeg)=10664 to zipfile  len=156101
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 14, np.float32(279.0866), np.float32(174.38184), 'track1', 2935, 14, np.float32(410.38763), np.float32(169.02036), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 15 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 15 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=156101
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=156101
DEBUG    root:bottle_api.py:655 appending frame 15 len(frame_jpeg)=10656 to zipfile  len=166757
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 15, np.float32(280.8033), np.float32(171.37898), 'track1', 2935, 15, np.float32(410.9109), np.float32(168.35098), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 16 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 16 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=166757
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=166757
DEBUG    root:bottle_api.py:655 appending frame 16 len(frame_jpeg)=10694 to zipfile  len=177451
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 16, np.float32(283.06592), np.float32(167.11746), 'track1', 2935, 16, np.float32(411.2519), np.float32(167.56854), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 17 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 17 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=177451
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=177451
DEBUG    root:bottle_api.py:655 appending frame 17 len(frame_jpeg)=10668 to zipfile  len=188119
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 17, np.float32(286.12552), np.float32(162.41728), 'track1', 2935, 17, np.float32(412.14862), np.float32(166.74243), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 18 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 18 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=188119
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=188119
DEBUG    root:bottle_api.py:655 appending frame 18 len(frame_jpeg)=10691 to zipfile  len=198810
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 18, np.float32(289.4364), np.float32(157.83421), 'track1', 2935, 18, np.float32(412.772), np.float32(166.04532), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 19 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 19 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=198810
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=198810
DEBUG    root:bottle_api.py:655 appending frame 19 len(frame_jpeg)=10683 to zipfile  len=209493
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 19, np.float32(292.9593), np.float32(154.15373), 'track1', 2935, 19, np.float32(413.47046), np.float32(165.36334), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 20 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 20 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=209493
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=209493
DEBUG    root:bottle_api.py:655 appending frame 20 len(frame_jpeg)=10711 to zipfile  len=220204
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 20, np.float32(296.33203), np.float32(150.97227), 'track1', 2935, 20, np.float32(414.05246), np.float32(164.83565), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 21 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 21 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=220204
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=220204
DEBUG    root:bottle_api.py:655 appending frame 21 len(frame_jpeg)=10708 to zipfile  len=230912
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 21, np.float32(299.61682), np.float32(148.15572), 'track1', 2935, 21, np.float32(414.57986), np.float32(164.41032), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 22 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 22 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=230912
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=230912
DEBUG    root:bottle_api.py:655 appending frame 22 len(frame_jpeg)=10755 to zipfile  len=241667
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 22, np.float32(302.41223), np.float32(146.06512), 'track1', 2935, 22, np.float32(415.13678), np.float32(163.95451), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 23 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 23 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=241667
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=241667
DEBUG    root:bottle_api.py:655 appending frame 23 len(frame_jpeg)=10727 to zipfile  len=252394
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 23, np.float32(304.839), np.float32(143.95338), 'track1', 2935, 23, np.float32(415.707), np.float32(163.47241), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 24 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 24 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=252394
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=252394
DEBUG    root:bottle_api.py:655 appending frame 24 len(frame_jpeg)=10785 to zipfile  len=263179
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 24, np.float32(306.6817), np.float32(142.65771), 'track1', 2935, 24, np.float32(416.2361), np.float32(163.08864), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 25 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 25 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=263179
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=263179
DEBUG    root:bottle_api.py:655 appending frame 25 len(frame_jpeg)=10758 to zipfile  len=273937
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 25, np.float32(308.29037), np.float32(141.46837), 'track1', 2935, 25, np.float32(416.71365), np.float32(162.69798), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 26 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 26 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=273937
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=273937
DEBUG    root:bottle_api.py:655 appending frame 26 len(frame_jpeg)=10776 to zipfile  len=284713
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 26, np.float32(309.6705), np.float32(140.42322), 'track1', 2935, 26, np.float32(417.22467), np.float32(162.35446), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 27 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 27 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=284713
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=284713
DEBUG    root:bottle_api.py:655 appending frame 27 len(frame_jpeg)=10754 to zipfile  len=295467
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 27, np.float32(310.94748), np.float32(139.41954), 'track1', 2935, 27, np.float32(417.68878), np.float32(161.95541), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 28 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 28 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=295467
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=295467
DEBUG    root:bottle_api.py:655 appending frame 28 len(frame_jpeg)=10797 to zipfile  len=306264
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 28, np.float32(312.11557), np.float32(138.47643), 'track1', 2935, 28, np.float32(418.11694), np.float32(161.56035), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 29 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 29 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=306264
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=306264
DEBUG    root:bottle_api.py:655 appending frame 29 len(frame_jpeg)=10818 to zipfile  len=317082
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 29, np.float32(313.02948), np.float32(137.80421), 'track1', 2935, 29, np.float32(418.4584), np.float32(161.37184), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 30 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 30 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=317082
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=317082
DEBUG    root:bottle_api.py:655 appending frame 30 len(frame_jpeg)=10658 to zipfile  len=327740
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 30, np.float32(314.0013), np.float32(136.78111), 'track1', 2935, 30, np.float32(418.79883), np.float32(161.0881), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 31 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 31 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=327740
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=327740
DEBUG    root:bottle_api.py:655 appending frame 31 len(frame_jpeg)=10627 to zipfile  len=338367
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 31, np.float32(314.9789), np.float32(135.90427), 'track1', 2935, 31, np.float32(419.08777), np.float32(160.88455), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 32 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 32 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=338367
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=338367
DEBUG    root:bottle_api.py:655 appending frame 32 len(frame_jpeg)=10690 to zipfile  len=349057
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 32, np.float32(315.91882), np.float32(135.0361), 'track1', 2935, 32, np.float32(419.32782), np.float32(160.72418), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 33 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 33 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=349057
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=349057
DEBUG    root:bottle_api.py:655 appending frame 33 len(frame_jpeg)=10622 to zipfile  len=359679
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 33, np.float32(316.87933), np.float32(134.16045), 'track1', 2935, 33, np.float32(419.52307), np.float32(160.55975), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 34 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 34 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=359679
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=359679
DEBUG    root:bottle_api.py:655 appending frame 34 len(frame_jpeg)=10763 to zipfile  len=370442
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 34, np.float32(318.037), np.float32(133.02985), 'track1', 2935, 34, np.float32(419.71173), np.float32(160.41745), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 35 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 35 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=370442
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=370442
DEBUG    root:bottle_api.py:655 appending frame 35 len(frame_jpeg)=10678 to zipfile  len=381120
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 35, np.float32(319.12848), np.float32(132.00314), 'track1', 2935, 35, np.float32(419.94858), np.float32(160.2767), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 36 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 36 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=381120
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=381120
DEBUG    root:bottle_api.py:655 appending frame 36 len(frame_jpeg)=10746 to zipfile  len=391866
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 36, np.float32(320.28906), np.float32(130.93864), 'track1', 2935, 36, np.float32(420.2005), np.float32(160.14499), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 37 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 37 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=391866
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=391866
DEBUG    root:bottle_api.py:655 appending frame 37 len(frame_jpeg)=10719 to zipfile  len=402585
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 37, np.float32(321.61514), np.float32(129.94736), 'track1', 2935, 37, np.float32(420.33423), np.float32(159.9683), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 38 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 38 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=402585
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=402585
DEBUG    root:bottle_api.py:655 appending frame 38 len(frame_jpeg)=10773 to zipfile  len=413358
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 38, np.float32(322.81555), np.float32(128.6868), 'track1', 2935, 38, np.float32(420.46136), np.float32(159.80545), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 39 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 39 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=413358
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=413358
DEBUG    root:bottle_api.py:655 appending frame 39 len(frame_jpeg)=10726 to zipfile  len=424084
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 39, np.float32(324.16287), np.float32(127.63728), 'track1', 2935, 39, np.float32(420.6887), np.float32(159.64021), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 40 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 40 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=424084
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=424084
DEBUG    root:bottle_api.py:655 appending frame 40 len(frame_jpeg)=10810 to zipfile  len=434894
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 40, np.float32(325.77695), np.float32(126.35854), 'track1', 2935, 40, np.float32(421.13116), np.float32(159.37308), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 41 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 41 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=434894
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=434894
DEBUG    root:bottle_api.py:655 appending frame 41 len(frame_jpeg)=10757 to zipfile  len=445651
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 41, np.float32(327.54724), np.float32(125.01896), 'track1', 2935, 41, np.float32(421.37308), np.float32(159.2165), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 42 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 42 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=445651
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=445651
DEBUG    root:bottle_api.py:655 appending frame 42 len(frame_jpeg)=10840 to zipfile  len=456491
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 42, np.float32(329.1935), np.float32(123.85455), 'track1', 2935, 42, np.float32(421.609), np.float32(159.05336), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 43 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 43 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=456491
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=456491
DEBUG    root:bottle_api.py:655 appending frame 43 len(frame_jpeg)=10773 to zipfile  len=467264
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 43, np.float32(330.7279), np.float32(122.58627), 'track1', 2935, 43, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 44 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 44 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=467264
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=467264
DEBUG    root:bottle_api.py:655 appending frame 44 len(frame_jpeg)=4873 to zipfile  len=472137
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 44, np.float32(275.54797), np.float32(163.25996), 'track1', 2935, 44, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 45 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 45 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=472137
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=472137
DEBUG    root:bottle_api.py:655 appending frame 45 len(frame_jpeg)=5858 to zipfile  len=477995
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 45, np.float32(284.3962), np.float32(130.96219), 'track1', 2935, 45, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 46 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 46 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=477995
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=477995
DEBUG    root:bottle_api.py:655 appending frame 46 len(frame_jpeg)=6585 to zipfile  len=484580
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 46, np.float32(282.28745), np.float32(131.37633), 'track1', 2935, 46, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 47 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 47 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=484580
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=484580
DEBUG    root:bottle_api.py:655 appending frame 47 len(frame_jpeg)=7175 to zipfile  len=491755
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 47, np.float32(281.21487), np.float32(131.3929), 'track1', 2935, 47, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 48 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 48 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=491755
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=491755
DEBUG    root:bottle_api.py:655 appending frame 48 len(frame_jpeg)=7684 to zipfile  len=499439
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 48, np.float32(280.38132), np.float32(131.52223), 'track1', 2935, 48, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 49 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 49 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=499439
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=499439
DEBUG    root:bottle_api.py:655 appending frame 49 len(frame_jpeg)=8205 to zipfile  len=507644
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 49, np.float32(279.73297), np.float32(131.59457), 'track1', 2935, 49, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 50 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 50 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=507644
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=507644
DEBUG    root:bottle_api.py:655 appending frame 50 len(frame_jpeg)=8658 to zipfile  len=516302
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 50, np.float32(279.2917), np.float32(131.62213), 'track1', 2935, 50, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 51 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 51 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=516302
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=516302
DEBUG    root:bottle_api.py:655 appending frame 51 len(frame_jpeg)=9001 to zipfile  len=525303
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 51, np.float32(279.0962), np.float32(131.5339), 'track1', 2935, 51, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 52 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 52 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=525303
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=525303
DEBUG    root:bottle_api.py:655 appending frame 52 len(frame_jpeg)=9354 to zipfile  len=534657
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 52, np.float32(278.9352), np.float32(131.46538), 'track1', 2935, 52, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 53 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 53 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=534657
DEBUG    root:bottle_api.py:651 NOTIFY. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=534657
DEBUG    root:bottle_api.py:655 appending frame 53 len(frame_jpeg)=9668 to zipfile  len=544325
DEBUG    root:db.py:853 cmd=INSERT INTO movie_frame_trackpoints (movie_id,frame_number,x,y,label) VALUES (%s,%s,%s,%s,%s),(%s,%s,%s,%s,%s) vals=[2935, 53, np.float32(278.6685), np.float32(131.54623), 'track1', 2935, 53, np.float32(421.7886), np.float32(158.78566), 'track2']
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=Tracked frames 54 of 54
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "Tracked frames 54 of 54", "args": []}) = 1 
DEBUG    root:bottle_api.py:665 NOTIFY AFTER. self=<app.bottle_api.MovieTrackCallback object at 0x10bf4d400> self.ziplen=544325
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/843/2935-6365_mp4.zip
DEBUG    root:bottle_api.py:677 zipfile_data /var/folders/r9/mvjqrvl963v1754s4sn6bvxm0000gn/T/movie_293580gftbx1.zip length=506507
INFO     root:db_object.py:187 write_object(db://object_store/843/2935-6365_mp4.zip,len=506507)
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=movie_zipfile_urn value=db://object_store/843/2935-6365_mp4.zip
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "movie_zipfile_urn", "value": "db://object_store/843/2935-6365_mp4.zip", "args": []}) = 1 
DEBUG    root:bottle_api.py:682 DONE. Set TRACKING_COMPLETED
INFO     root:db.py:1025 set_user_id=None set_movie_id=2935 prop=status value=TRACKING COMPLETED
DEBUG    root:db.py:111 set_metadata({"user_id": 2488, "set_movie_id": 2935, "prop": "status", "value": "TRACKING COMPLETED", "args": []}) = 1 
DEBUG    root:bottle_api.py:685 Unlinking /var/folders/r9/mvjqrvl963v1754s4sn6bvxm0000gn/T/movie_293580gftbx1.zip length=506507
DEBUG    root:bottle_api.py:755 return from api_track_movie
DEBUG    root:movie_tracker_test.py:133 track movie ret={'error': False, 'message': 'Tracking is queued'}
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035459, 'created_at': 1746035459, 'use_count': 4, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:bottle_api.py:576 fieldnames=['frame_number', 'track1 x', 'track1 y', 'track2 x', 'track2 y']
INFO     root:db.py:540 movie_id=2935 zipfile=True what=movie_zipfile_urn urn=db://object_store/843/2935-6365_mp4.zip
INFO     root:db_object.py:160 read_object(db://object_store/843/2935-6365_mp4.zip)
DEBUG    root:db_object.py:162 urn=db://object_store/843/2935-6365_mp4.zip o=ParseResult(scheme='db', netloc='object_store', path='/843/2935-6365_mp4.zip', params='', query='', fragment='')
DEBUG    root:db.py:111 get_movie_data({"movie_id": 2935, "zipfile": true, "args": []}) = {"log_size": 1787754, "error": true} 
INFO     root:movie_tracker_test.py:150 names of files in zipfile: ['frame_0000.jpg', 'frame_0001.jpg', 'frame_0002.jpg', 'frame_0003.jpg', 'frame_0004.jpg', 'frame_0005.jpg', 'frame_0006.jpg', 'frame_0007.jpg', 'frame_0008.jpg', 'frame_0009.jpg', 'frame_0010.jpg', 'frame_0011.jpg', 'frame_0012.jpg', 'frame_0013.jpg', 'frame_0014.jpg', 'frame_0015.jpg', 'frame_0016.jpg', 'frame_0017.jpg', 'frame_0018.jpg', 'frame_0019.jpg', 'frame_0020.jpg', 'frame_0021.jpg', 'frame_0022.jpg', 'frame_0023.jpg', 'frame_0024.jpg', 'frame_0025.jpg', 'frame_0026.jpg', 'frame_0027.jpg', 'frame_0028.jpg', 'frame_0029.jpg', 'frame_0030.jpg', 'frame_0031.jpg', 'frame_0032.jpg', 'frame_0033.jpg', 'frame_0034.jpg', 'frame_0035.jpg', 'frame_0036.jpg', 'frame_0037.jpg', 'frame_0038.jpg', 'frame_0039.jpg', 'frame_0040.jpg', 'frame_0041.jpg', 'frame_0042.jpg', 'frame_0043.jpg', 'frame_0044.jpg', 'frame_0045.jpg', 'frame_0046.jpg', 'frame_0047.jpg', 'frame_0048.jpg', 'frame_0049.jpg', 'frame_0050.jpg', 'frame_0051.jpg', 'frame_0052.jpg', 'frame_0053.jpg']
INFO     root:movie_tracker_test.py:156 fields: ['frame_number', 'track1 x', 'track1 y', 'track2 x', 'track2 y']
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035460, 'created_at': 1746035459, 'use_count': 5, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 2488, "movie_id": 2935, "get_last_frame_tracked": true, "args": []}) = [{"movie_id": 2935, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "created_at": 1746035459, "user_id": 2488, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": "20.00", "width": 480, "height": 360, "total_frames": 54, "total_bytes": 235944, "status": "TRACKING COMPLETED", "movie_data_urn": "db://object_store/843/2935-92c9.mov", "movie_zipfile_urn": "db://object_store/843/2935-6365_mp4.zip", "tracked_movie_id": null, "last_frame_tracked": 53}] 
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/843/2935-6365_mp4.zip
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035460, 'created_at': 1746035459, 'use_count': 6, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 2488, "movie_id": 2935, "get_last_frame_tracked": true, "args": []}) = [{"movie_id": 2935, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "created_at": 1746035459, "user_id": 2488, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": "20.00", "width": 480, "height": 360, "total_frames": 54, "total_bytes": 235944, "status": "TRACKING COMPLETED", "movie_data_urn": "db://object_store/843/2935-92c9.mov", "movie_zipfile_urn": "db://object_store/843/2935-6365_mp4.zip", "tracked_movie_id": null, "last_frame_tracked": 53}] 
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/843/2935-6365_mp4.zip
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035460, 'created_at': 1746035459, 'use_count': 7, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 2488, "movie_id": 2935, "get_last_frame_tracked": true, "args": []}) = [{"movie_id": 2935, "title": "test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071", "description": "test movie description", "created_at": 1746035459, "user_id": 2488, "course_id": 843, "published": 0, "deleted": 0, "date_uploaded": 1746035459, "mtime": "2025-04-30 13:50:59", "version": 1, "fps": "20.00", "width": 480, "height": 360, "total_frames": 54, "total_bytes": 235944, "status": "TRACKING COMPLETED", "movie_data_urn": "db://object_store/843/2935-92c9.mov", "movie_zipfile_urn": "db://object_store/843/2935-6365_mp4.zip", "tracked_movie_id": null, "last_frame_tracked": 53}] 
DEBUG    root:db_object.py:114 make_signed_url urn=db://object_store/843/2935-6365_mp4.zip
DEBUG    root:movie_tracker_test.py:201 r10={'error': False, 'frames': {'0': {'markers': [{'frame_number': 0, 'label': 'track1', 'x': 275, 'y': 215}, {'frame_number': 0, 'label': 'track2', 'x': 410, 'y': 175}]}, '1': {'markers': [{'frame_number': 1, 'label': 'track1', 'x': 273, 'y': 212}, {'frame_number': 1, 'label': 'track2', 'x': 409, 'y': 174}]}, '10': {'markers': [{'frame_number': 10, 'label': 'track1', 'x': 272, 'y': 189}, {'frame_number': 10, 'label': 'track2', 'x': 409, 'y': 172}]}, '11': {'markers': [{'frame_number': 11, 'label': 'track1', 'x': 274, 'y': 184}, {'frame_number': 11, 'label': 'track2', 'x': 409, 'y': 171}]}, '12': {'markers': [{'frame_number': 12, 'label': 'track1', 'x': 276, 'y': 181}, {'frame_number': 12, 'label': 'track2', 'x': 409, 'y': 170}]}, '13': {'markers': [{'frame_number': 13, 'label': 'track1', 'x': 277, 'y': 177}, {'frame_number': 13, 'label': 'track2', 'x': 410, 'y': 170}]}, '14': {'markers': [{'frame_number': 14, 'label': 'track1', 'x': 279, 'y': 174}, {'frame_number': 14, 'label': 'track2', 'x': 410, 'y': 169}]}, '15': {'markers': [{'frame_number': 15, 'label': 'track1', 'x': 281, 'y': 171}, {'frame_number': 15, 'label': 'track2', 'x': 411, 'y': 168}]}, '16': {'markers': [{'frame_number': 16, 'label': 'track1', 'x': 283, 'y': 167}, {'frame_number': 16, 'label': 'track2', 'x': 411, 'y': 168}]}, '17': {'markers': [{'frame_number': 17, 'label': 'track1', 'x': 286, 'y': 162}, {'frame_number': 17, 'label': 'track2', 'x': 412, 'y': 167}]}, '18': {'markers': [{'frame_number': 18, 'label': 'track1', 'x': 289, 'y': 158}, {'frame_number': 18, 'label': 'track2', 'x': 413, 'y': 166}]}, '19': {'markers': [{'frame_number': 19, 'label': 'track1', 'x': 293, 'y': 154}, {'frame_number': 19, 'label': 'track2', 'x': 413, 'y': 165}]}, '2': {'markers': [{'frame_number': 2, 'label': 'track1', 'x': 272, 'y': 211}, {'frame_number': 2, 'label': 'track2', 'x': 409, 'y': 174}]}, '20': {'markers': [{'frame_number': 20, 'label': 'track1', 'x': 296, 'y': 151}, {'frame_number': 20, 'label': 'track2', 'x': 414, 'y': 165}]}, '21': {'markers': [{'frame_number': 21, 'label': 'track1', 'x': 300, 'y': 148}, {'frame_number': 21, 'label': 'track2', 'x': 415, 'y': 164}]}, '22': {'markers': [{'frame_number': 22, 'label': 'track1', 'x': 302, 'y': 146}, {'frame_number': 22, 'label': 'track2', 'x': 415, 'y': 164}]}, '23': {'markers': [{'frame_number': 23, 'label': 'track1', 'x': 305, 'y': 144}, {'frame_number': 23, 'label': 'track2', 'x': 416, 'y': 163}]}, '24': {'markers': [{'frame_number': 24, 'label': 'track1', 'x': 307, 'y': 143}, {'frame_number': 24, 'label': 'track2', 'x': 416, 'y': 163}]}, '25': {'markers': [{'frame_number': 25, 'label': 'track1', 'x': 308, 'y': 141}, {'frame_number': 25, 'label': 'track2', 'x': 417, 'y': 163}]}, '26': {'markers': [{'frame_number': 26, 'label': 'track1', 'x': 310, 'y': 140}, {'frame_number': 26, 'label': 'track2', 'x': 417, 'y': 162}]}, '27': {'markers': [{'frame_number': 27, 'label': 'track1', 'x': 311, 'y': 139}, {'frame_number': 27, 'label': 'track2', 'x': 418, 'y': 162}]}, '28': {'markers': [{'frame_number': 28, 'label': 'track1', 'x': 312, 'y': 138}, {'frame_number': 28, 'label': 'track2', 'x': 418, 'y': 162}]}, '29': {'markers': [{'frame_number': 29, 'label': 'track1', 'x': 313, 'y': 138}, {'frame_number': 29, 'label': 'track2', 'x': 418, 'y': 161}]}, '3': {'markers': [{'frame_number': 3, 'label': 'track1', 'x': 272, 'y': 210}, {'frame_number': 3, 'label': 'track2', 'x': 409, 'y': 174}]}, '30': {'markers': [{'frame_number': 30, 'label': 'track1', 'x': 314, 'y': 137}, {'frame_number': 30, 'label': 'track2', 'x': 419, 'y': 161}]}, '31': {'markers': [{'frame_number': 31, 'label': 'track1', 'x': 315, 'y': 136}, {'frame_number': 31, 'label': 'track2', 'x': 419, 'y': 161}]}, '32': {'markers': [{'frame_number': 32, 'label': 'track1', 'x': 316, 'y': 135}, {'frame_number': 32, 'label': 'track2', 'x': 419, 'y': 161}]}, '33': {'markers': [{'frame_number': 33, 'label': 'track1', 'x': 317, 'y': 134}, {'frame_number': 33, 'label': 'track2', 'x': 420, 'y': 161}]}, '34': {'markers': [{'frame_number': 34, 'label': 'track1', 'x': 318, 'y': 133}, {'frame_number': 34, 'label': 'track2', 'x': 420, 'y': 160}]}, '35': {'markers': [{'frame_number': 35, 'label': 'track1', 'x': 319, 'y': 132}, {'frame_number': 35, 'label': 'track2', 'x': 420, 'y': 160}]}, '36': {'markers': [{'frame_number': 36, 'label': 'track1', 'x': 320, 'y': 131}, {'frame_number': 36, 'label': 'track2', 'x': 420, 'y': 160}]}, '37': {'markers': [{'frame_number': 37, 'label': 'track1', 'x': 322, 'y': 130}, {'frame_number': 37, 'label': 'track2', 'x': 420, 'y': 160}]}, '38': {'markers': [{'frame_number': 38, 'label': 'track1', 'x': 323, 'y': 129}, {'frame_number': 38, 'label': 'track2', 'x': 420, 'y': 160}]}, '39': {'markers': [{'frame_number': 39, 'label': 'track1', 'x': 324, 'y': 128}, {'frame_number': 39, 'label': 'track2', 'x': 421, 'y': 160}]}, '4': {'markers': [{'frame_number': 4, 'label': 'track1', 'x': 271, 'y': 208}, {'frame_number': 4, 'label': 'track2', 'x': 409, 'y': 174}]}, '40': {'markers': [{'frame_number': 40, 'label': 'track1', 'x': 326, 'y': 126}, {'frame_number': 40, 'label': 'track2', 'x': 421, 'y': 159}]}, '41': {'markers': [{'frame_number': 41, 'label': 'track1', 'x': 328, 'y': 125}, {'frame_number': 41, 'label': 'track2', 'x': 421, 'y': 159}]}, '42': {'markers': [{'frame_number': 42, 'label': 'track1', 'x': 329, 'y': 124}, {'frame_number': 42, 'label': 'track2', 'x': 422, 'y': 159}]}, '43': {'markers': [{'frame_number': 43, 'label': 'track1', 'x': 331, 'y': 123}, {'frame_number': 43, 'label': 'track2', 'x': 422, 'y': 159}]}, '44': {'markers': [{'frame_number': 44, 'label': 'track1', 'x': 276, 'y': 163}, {'frame_number': 44, 'label': 'track2', 'x': 422, 'y': 159}]}, '45': {'markers': [{'frame_number': 45, 'label': 'track1', 'x': 284, 'y': 131}, {'frame_number': 45, 'label': 'track2', 'x': 422, 'y': 159}]}, '46': {'markers': [{'frame_number': 46, 'label': 'track1', 'x': 282, 'y': 131}, {'frame_number': 46, 'label': 'track2', 'x': 422, 'y': 159}]}, '47': {'markers': [{'frame_number': 47, 'label': 'track1', 'x': 281, 'y': 131}, {'frame_number': 47, 'label': 'track2', 'x': 422, 'y': 159}]}, '48': {'markers': [{'frame_number': 48, 'label': 'track1', 'x': 280, 'y': 132}, {'frame_number': 48, 'label': 'track2', 'x': 422, 'y': 159}]}, '49': {'markers': [{'frame_number': 49, 'label': 'track1', 'x': 280, 'y': 132}, {'frame_number': 49, 'label': 'track2', 'x': 422, 'y': 159}]}, '5': {'markers': [{'frame_number': 5, 'label': 'track1', 'x': 270, 'y': 207}, {'frame_number': 5, 'label': 'track2', 'x': 408, 'y': 174}]}, '50': {'markers': [{'frame_number': 50, 'label': 'track1', 'x': 279, 'y': 132}, {'frame_number': 50, 'label': 'track2', 'x': 422, 'y': 159}]}, '51': {'markers': [{'frame_number': 51, 'label': 'track1', 'x': 279, 'y': 132}, {'frame_number': 51, 'label': 'track2', 'x': 422, 'y': 159}]}, '52': {'markers': [{'frame_number': 52, 'label': 'track1', 'x': 279, 'y': 131}, {'frame_number': 52, 'label': 'track2', 'x': 422, 'y': 159}]}, '53': {'markers': [{'frame_number': 53, 'label': 'track1', 'x': 279, 'y': 132}, {'frame_number': 53, 'label': 'track2', 'x': 422, 'y': 159}]}, '6': {'markers': [{'frame_number': 6, 'label': 'track1', 'x': 270, 'y': 204}, {'frame_number': 6, 'label': 'track2', 'x': 408, 'y': 174}]}, '7': {'markers': [{'frame_number': 7, 'label': 'track1', 'x': 270, 'y': 201}, {'frame_number': 7, 'label': 'track2', 'x': 408, 'y': 173}]}, '8': {'markers': [{'frame_number': 8, 'label': 'track1', 'x': 270, 'y': 198}, {'frame_number': 8, 'label': 'track2', 'x': 408, 'y': 173}]}, '9': {'markers': [{'frame_number': 9, 'label': 'track1', 'x': 271, 'y': 193}, {'frame_number': 9, 'label': 'track2', 'x': 408, 'y': 172}]}}, 'metadata': {'course_id': 843, 'created_at': 1746035459, 'date_uploaded': 1746035459, 'deleted': 0, 'description': 'test movie description', 'fps': '20.00', 'height': 360, 'last_frame_tracked': 53, 'movie_data_urn': 'db://object_store/843/2935-92c9.mov', 'movie_id': 2935, 'movie_zipfile_url': '/api/get-object?urn=db%3A%2F%2Fobject_store%2F843%2F2935-6365_mp4.zip&sig=dbdbcff8702479d3a83bd164700a05363eaf2d52987fb1c89424e3ff185b654c', 'movie_zipfile_urn': 'db://object_store/843/2935-6365_mp4.zip', 'mtime': '2025-04-30 13:50:59', 'published': 0, 'status': 'TRACKING COMPLETED', 'title': 'test-movie title 97767c51-58c9-4224-aec2-d2dd0ef64071', 'total_bytes': 235944, 'total_frames': 54, 'tracked_movie_id': None, 'user_id': 2488, 'version': 1, 'width': 480}}
PASSED                                                                   [ 80%]
------------------------------ live log teardown -------------------------------
DEBUG    root:movie_test.py:147 new_movie fixture: Delete the movie we uploaded
DEBUG    root:db.py:111 validate_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f569696a0ee54203ae3581906b4a0d37)=[OrderedDict({'id': 2488, 'user_id': 2488, 'api_key': 'f569696a0ee54203ae3581906b4a0d37', 'first_used_at': 1746035459, 'last_used_at': 1746035460, 'created_at': 1746035459, 'use_count': 8, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 59), 'name': 'Test User Name', 'email': 'simsong+test-ec9546@gmail.com', 'primary_course_id': 843, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 can_access_movie({"user_id": 2488, "movie_id": 2935, "args": []}) = true 
DEBUG    root:db.py:111 delete_movie({"movie_id": 2935, "delete": true, "args": []}) = null 
DEBUG    root:movie_test.py:154 new_movie fixture: Purge the movie that we have deleted
DEBUG    root:db.py:660 purge_movie_frames movie_id=2935
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2935, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2935
INFO     root:db_object.py:207 delete_object(db://object_store/843/2935-92c9.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/843/2935-92c9.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2935-92c9.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2935, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2935, "args": []}) = null 
DEBUG    root:movie_test.py:156 new_movie fixture: done
DEBUG    root:db.py:111 delete_api_key({"args": ["f569696a0ee54203ae3581906b4a0d37"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-ec9546@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-a25d@gmail.com", "course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-a25d@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2932
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2932, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2932
INFO     root:db_object.py:207 delete_object(db://object_store/843/2932-61ea.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/843/2932-61ea.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2932-61ea.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2932, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2932, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2933
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2933, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2933
INFO     root:db_object.py:207 delete_object(db://object_store/843/2933-ce43.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/843/2933-ce43.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2933-ce43.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2933, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2933, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2934
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2934, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2934
INFO     root:db_object.py:207 delete_object(db://object_store/843/2934-fc86.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/843/2934-fc86.mov o=ParseResult(scheme='db', netloc='object_store', path='/843/2934-fc86.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2934, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2934, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-5a28@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-2b9e7e37-fa1f-4859-b998-98749ecf", "args": []}) = 1 

tests/sitetitle_test.py::test_sitetitle_just_selenium SKIPPED (tempo...) [ 82%]
tests/tracker_test.py::test_cleanup_mp4 PASSED                           [ 84%]
tests/tracker_test.py::test_track_movie 
-------------------------------- live log call ---------------------------------
INFO     root:tracker.py:228 start movie tracking
INFO     root:tracker.py:176 start movie rendering
INFO     root:tracker.py:200 rendered movie
DEBUG    root:tracker_test.py:76 tp1={'frame_number': 0, 'x': 140, 'y': 82, 'label': 'apex'} tp2={'frame_number': 0, 'x': 140, 'y': 82, 'label': 'apex'}
DEBUG    root:tracker_test.py:76 tp1={'frame_number': 0, 'x': 240, 'y': 96, 'label': 'ruler 0 mm'} tp2={'frame_number': 0, 'x': 240, 'y': 96, 'label': 'ruler 0 mm'}
DEBUG    root:tracker_test.py:76 tp1={'frame_number': 0, 'x': 242, 'y': 135, 'label': 'ruler 20 mm'} tp2={'frame_number': 0, 'x': 242, 'y': 135, 'label': 'ruler 20 mm'}
DEBUG    root:tracker_test.py:76 tp1={'x': np.float32(242.37108), 'y': np.float32(135.18193), 'status': 1, 'err': 0.3412500023841858, 'label': 'ruler 20 mm', 'frame_number': 295} tp2={'frame_number': 295, 'x': 242, 'y': 135, 'label': 'ruler 20 mm'}
DEBUG    root:tracker_test.py:76 tp1={'x': np.float32(240.32393), 'y': np.float32(96.19948), 'status': 1, 'err': 0.15291666984558105, 'label': 'ruler 0 mm', 'frame_number': 295} tp2={'frame_number': 295, 'x': 240, 'y': 96, 'label': 'ruler 0 mm'}
DEBUG    root:tracker_test.py:76 tp1={'x': np.float32(57.952946), 'y': np.float32(74.62159), 'status': 1, 'err': 0.23972222208976746, 'label': 'apex', 'frame_number': 295} tp2={'frame_number': 295, 'x': 58, 'y': 75, 'label': 'apex'}
PASSED                                                                   [ 86%]
tests/tracker_test.py::test_movie_rotate PASSED                          [ 88%]
tests/user_test.py::test_new_course 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "course_name": "test-test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7 course name", "max_enrollment": 10, "args": []}) = {"course_id": 844} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-205a@gmail.com", "course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "name": "Dr. Admin", "args": []}) = {"id": 2489, "name": "Dr. Admin", "email": "simsong+admin+test-205a@gmail.com", "primary_course_id": 844, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2489, "course_id": 844} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-205a@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-205a@gmail.com user_id=2489
INFO     root:db.py:469 course_id=844
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-205a@gmail.com", "course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "args": []}) = {"user_id": 2489, "course_id": 844} 
INFO     root:dbmaint.py:261 generated course_key=test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7  admin_email=simsong+admin+test-205a@gmail.com admin_id=2489
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-956d@gmail.com", "course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2490, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-956d@gmail.com", "primary_course_id": 844, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 1, "user_id": 2490, "course_id": 844} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-956d@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-956d@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2490, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2936 
DEBUG    root:db.py:672 purge_movie_data movie_id=2936
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2936, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2936
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2936, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2936
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2936, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2936, "args": []}) = [{"movie_id": 2936, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2490, "course_id": 844, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/844/2936-3263.mov
INFO     root:db_object.py:187 write_object(db://object_store/844/2936-3263.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2490, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2937 
DEBUG    root:db.py:672 purge_movie_data movie_id=2937
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2937, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2937
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2937, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2937
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2937, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2937, "args": []}) = [{"movie_id": 2937, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2490, "course_id": 844, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/844/2937-4673.mov
INFO     root:db_object.py:187 write_object(db://object_store/844/2937-4673.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2490, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2938 
DEBUG    root:db.py:672 purge_movie_data movie_id=2938
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2938, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2938
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2938, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2938
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2938, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2938, "args": []}) = [{"movie_id": 2938, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2490, "course_id": 844, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/844/2938-0413.mov
INFO     root:db_object.py:187 write_object(db://object_store/844/2938-0413.mov,len=690774)
-------------------------------- live log call ---------------------------------
INFO     root:user_test.py:127 Created course test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7
DEBUG    root:user_test.py:131 len(res)=22
DEBUG    root:user_test.py:133 0: OrderedDict({'id': 55, 'name': 'Plant Tracer Demo Account', 'email': 'sbarber2+demo@gmail.com', 'primary_course_id': 19, 'created_at': 1724186266, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2024, 8, 20, 16, 37, 46), 'demo': 1, 'user_id': 55})
DEBUG    root:user_test.py:133 1: OrderedDict({'id': 2287, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-c5e9@gmail.com', 'primary_course_id': 769, 'created_at': 1746034951, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 31), 'demo': 1, 'user_id': 2287})
DEBUG    root:user_test.py:133 2: OrderedDict({'id': 2289, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-d48b@gmail.com', 'primary_course_id': 770, 'created_at': 1746034951, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 31), 'demo': 1, 'user_id': 2289})
DEBUG    root:user_test.py:133 3: OrderedDict({'id': 2291, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-38de@gmail.com', 'primary_course_id': 771, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2291})
DEBUG    root:user_test.py:133 4: OrderedDict({'id': 2293, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-7cf5@gmail.com', 'primary_course_id': 772, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2293})
DEBUG    root:user_test.py:133 5: OrderedDict({'id': 2295, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-9a3b@gmail.com', 'primary_course_id': 773, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2295})
DEBUG    root:user_test.py:133 6: OrderedDict({'id': 2297, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-1c82@gmail.com', 'primary_course_id': 774, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2297})
DEBUG    root:user_test.py:133 7: OrderedDict({'id': 2299, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-d842@gmail.com', 'primary_course_id': 775, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2299})
DEBUG    root:user_test.py:133 8: OrderedDict({'id': 2301, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-19e7@gmail.com', 'primary_course_id': 776, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2301})
DEBUG    root:user_test.py:133 9: OrderedDict({'id': 2303, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-34c8@gmail.com', 'primary_course_id': 777, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2303})
DEBUG    root:user_test.py:133 10: OrderedDict({'id': 2305, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-6daf@gmail.com', 'primary_course_id': 778, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2305})
DEBUG    root:user_test.py:133 11: OrderedDict({'id': 2307, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-68c2@gmail.com', 'primary_course_id': 779, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2307})
DEBUG    root:user_test.py:133 12: OrderedDict({'id': 2309, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-c6ba@gmail.com', 'primary_course_id': 780, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2309})
DEBUG    root:user_test.py:133 13: OrderedDict({'id': 2311, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-88a4@gmail.com', 'primary_course_id': 781, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2311})
DEBUG    root:user_test.py:133 14: OrderedDict({'id': 2313, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-9b4b@gmail.com', 'primary_course_id': 782, 'created_at': 1746034952, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 32), 'demo': 1, 'user_id': 2313})
DEBUG    root:user_test.py:133 15: OrderedDict({'id': 2315, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-57e7@gmail.com', 'primary_course_id': 783, 'created_at': 1746034953, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 33), 'demo': 1, 'user_id': 2315})
DEBUG    root:user_test.py:133 16: OrderedDict({'id': 2317, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-3ca8@gmail.com', 'primary_course_id': 784, 'created_at': 1746034957, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 37), 'demo': 1, 'user_id': 2317})
DEBUG    root:user_test.py:133 17: OrderedDict({'id': 2319, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-ffb4@gmail.com', 'primary_course_id': 785, 'created_at': 1746034957, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 37), 'demo': 1, 'user_id': 2319})
DEBUG    root:user_test.py:133 18: OrderedDict({'id': 2321, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-e229@gmail.com', 'primary_course_id': 786, 'created_at': 1746034957, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 37), 'demo': 1, 'user_id': 2321})
DEBUG    root:user_test.py:133 19: OrderedDict({'id': 2323, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-9602@gmail.com', 'primary_course_id': 787, 'created_at': 1746034957, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 37), 'demo': 1, 'user_id': 2323})
DEBUG    root:user_test.py:133 20: OrderedDict({'id': 2325, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-f036@gmail.com', 'primary_course_id': 788, 'created_at': 1746034957, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 42, 37), 'demo': 1, 'user_id': 2325})
DEBUG    root:user_test.py:133 21: OrderedDict({'id': 2490, 'name': 'Plant Tracer Demo Account', 'email': 'demo+admin+test-956d@gmail.com', 'primary_course_id': 844, 'created_at': 1746035460, 'enabled': 1, 'links_sent_without_acknowledgement': 0, 'mtime': datetime.datetime(2025, 4, 30, 13, 51), 'demo': 1, 'user_id': 2490})
DEBUG    root:db.py:111 remaining_course_registrations({"course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "args": []}) = 8 
PASSED                                                                   [ 90%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-205a@gmail.com", "course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-205a@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2936
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2936, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2936
INFO     root:db_object.py:207 delete_object(db://object_store/844/2936-3263.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/844/2936-3263.mov o=ParseResult(scheme='db', netloc='object_store', path='/844/2936-3263.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2936, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2936, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2937
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2937, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2937
INFO     root:db_object.py:207 delete_object(db://object_store/844/2937-4673.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/844/2937-4673.mov o=ParseResult(scheme='db', netloc='object_store', path='/844/2937-4673.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2937, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2937, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2938
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2938, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2938
INFO     root:db_object.py:207 delete_object(db://object_store/844/2938-0413.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/844/2938-0413.mov o=ParseResult(scheme='db', netloc='object_store', path='/844/2938-0413.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2938, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2938, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-956d@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-9bc50c7b-cd8c-4f29-b44d-fe76d6c7", "args": []}) = 1 

tests/user_test.py::test_add_remove_admin 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "course_name": "test-test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6 course name", "max_enrollment": 10, "args": []}) = {"course_id": 845} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-db87@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "name": "Dr. Admin", "args": []}) = {"id": 2491, "name": "Dr. Admin", "email": "simsong+admin+test-db87@gmail.com", "primary_course_id": 845, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2491, "course_id": 845} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-db87@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-db87@gmail.com user_id=2491
INFO     root:db.py:469 course_id=845
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-db87@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "args": []}) = {"user_id": 2491, "course_id": 845} 
INFO     root:dbmaint.py:261 generated course_key=test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6  admin_email=simsong+admin+test-db87@gmail.com admin_id=2491
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-eea6@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2492, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-eea6@gmail.com", "primary_course_id": 845, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 1, "user_id": 2492, "course_id": 845} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-eea6@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-eea6@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2492, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2939 
DEBUG    root:db.py:672 purge_movie_data movie_id=2939
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2939, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2939
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2939, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2939
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2939, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2939, "args": []}) = [{"movie_id": 2939, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2492, "course_id": 845, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/845/2939-97f5.mov
INFO     root:db_object.py:187 write_object(db://object_store/845/2939-97f5.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2492, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2940 
DEBUG    root:db.py:672 purge_movie_data movie_id=2940
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2940, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2940
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2940, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2940
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2940, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2940, "args": []}) = [{"movie_id": 2940, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2492, "course_id": 845, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/845/2940-0ef8.mov
INFO     root:db_object.py:187 write_object(db://object_store/845/2940-0ef8.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2492, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2941 
DEBUG    root:db.py:672 purge_movie_data movie_id=2941
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2941, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2941
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2941, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2941
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2941, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2941, "args": []}) = [{"movie_id": 2941, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2492, "course_id": 845, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/845/2941-3866.mov
INFO     root:db_object.py:187 write_object(db://object_store/845/2941-3866.mov,len=690774)
-------------------------------- live log call ---------------------------------
INFO     root:user_test.py:149 Created course test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-0bb9@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "name": "Dr. Admin", "args": []}) = {"id": 2493, "name": "Dr. Admin", "email": "simsong+admin+test-0bb9@gmail.com", "primary_course_id": 845, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2493, "course_id": 845} 
INFO     root:user_test.py:154 generated admin_email=simsong+admin+test-0bb9@gmail.com user_id=2493
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-0bb9@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-0bb9@gmail.com user_id=2493
INFO     root:db.py:469 course_id=845
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-0bb9@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "args": []}) = {"user_id": 2493, "course_id": 845} 
DEBUG    root:db.py:111 check_course_admin({"user_id": 2493, "course_id": 845, "args": []}) = true 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-0bb9@gmail.com", "course_name": "test-test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6 course name", "args": []}) = null 
DEBUG    root:db.py:111 check_course_admin({"user_id": 2493, "course_id": 845, "args": []}) = false 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-0bb9@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-0bb9@gmail.com user_id=2493
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-0bb9@gmail.com", "course_id": 845, "args": []}) = {"user_id": 2493, "course_id": 845} 
DEBUG    root:db.py:111 check_course_admin({"user_id": 2493, "course_id": 845, "args": []}) = true 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-0bb9@gmail.com", "course_id": 845, "args": []}) = null 
DEBUG    root:db.py:111 check_course_admin({"user_id": 2493, "course_id": 845, "args": []}) = false 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-0bb9@gmail.com", "args": []}) = null 
PASSED                                                                   [ 92%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-db87@gmail.com", "course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-db87@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2939
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2939, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2939
INFO     root:db_object.py:207 delete_object(db://object_store/845/2939-97f5.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/845/2939-97f5.mov o=ParseResult(scheme='db', netloc='object_store', path='/845/2939-97f5.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2939, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2939, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2940
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2940, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2940
INFO     root:db_object.py:207 delete_object(db://object_store/845/2940-0ef8.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/845/2940-0ef8.mov o=ParseResult(scheme='db', netloc='object_store', path='/845/2940-0ef8.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2940, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2940, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2941
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2941, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2941
INFO     root:db_object.py:207 delete_object(db://object_store/845/2941-3866.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/845/2941-3866.mov o=ParseResult(scheme='db', netloc='object_store', path='/845/2941-3866.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2941, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2941, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-eea6@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-eb3f24a7-ba5c-4ad4-b695-3e10bdc6", "args": []}) = 1 

tests/user_test.py::test_new_user 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "course_name": "test-test-aa5f522e-076c-4d0f-a718-79bd3c95 course name", "max_enrollment": 10, "args": []}) = {"course_id": 846} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-43be@gmail.com", "course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "name": "Dr. Admin", "args": []}) = {"id": 2494, "name": "Dr. Admin", "email": "simsong+admin+test-43be@gmail.com", "primary_course_id": 846, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2494, "course_id": 846} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-43be@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-43be@gmail.com user_id=2494
INFO     root:db.py:469 course_id=846
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-43be@gmail.com", "course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "args": []}) = {"user_id": 2494, "course_id": 846} 
INFO     root:dbmaint.py:261 generated course_key=test-aa5f522e-076c-4d0f-a718-79bd3c95  admin_email=simsong+admin+test-43be@gmail.com admin_id=2494
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-5f58@gmail.com", "course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2495, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-5f58@gmail.com", "primary_course_id": 846, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 1, "user_id": 2495, "course_id": 846} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-5f58@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-5f58@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2495, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2942 
DEBUG    root:db.py:672 purge_movie_data movie_id=2942
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2942, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2942
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2942, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2942
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2942, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2942, "args": []}) = [{"movie_id": 2942, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2495, "course_id": 846, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/846/2942-af5a.mov
INFO     root:db_object.py:187 write_object(db://object_store/846/2942-af5a.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2495, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2943 
DEBUG    root:db.py:672 purge_movie_data movie_id=2943
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2943, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2943
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2943, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2943
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2943, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2943, "args": []}) = [{"movie_id": 2943, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2495, "course_id": 846, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/846/2943-9f12.mov
INFO     root:db_object.py:187 write_object(db://object_store/846/2943-9f12.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2495, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2944 
DEBUG    root:db.py:672 purge_movie_data movie_id=2944
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2944, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2944
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2944, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2944
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2944, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2944, "args": []}) = [{"movie_id": 2944, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2495, "course_id": 846, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/846/2944-d0a1.mov
INFO     root:db_object.py:187 write_object(db://object_store/846/2944-d0a1.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-167679@gmail.com", "course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "name": "Test User Name", "args": []}) = {"id": 2496, "name": "Test User Name", "email": "simsong+test-167679@gmail.com", "primary_course_id": 846, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2496, "course_id": 846} 
INFO     root:user_test.py:98 generated user_email=simsong+test-167679@gmail.com user_id=2496
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-167679@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-167679@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
INFO     root:user_test.py:172 user_email=simsong+test-167679@gmail.com api_key=504c5be2b6f94159831dbf65f5f9f2b6
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-167679@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 lookup_user({"user_id": 2496, "get_admin": true, "args": []}) = null 
DEBUG    root:db.py:111 lookup_user({"user_id": 2496, "get_courses": true, "args": []}) = null 
PASSED                                                                   [ 94%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["504c5be2b6f94159831dbf65f5f9f2b6"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-167679@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-43be@gmail.com", "course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-43be@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2942
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2942, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2942
INFO     root:db_object.py:207 delete_object(db://object_store/846/2942-af5a.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/846/2942-af5a.mov o=ParseResult(scheme='db', netloc='object_store', path='/846/2942-af5a.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2942, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2942, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2943
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2943, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2943
INFO     root:db_object.py:207 delete_object(db://object_store/846/2943-9f12.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/846/2943-9f12.mov o=ParseResult(scheme='db', netloc='object_store', path='/846/2943-9f12.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2943, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2943, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2944
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2944, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2944
INFO     root:db_object.py:207 delete_object(db://object_store/846/2944-d0a1.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/846/2944-d0a1.mov o=ParseResult(scheme='db', netloc='object_store', path='/846/2944-d0a1.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2944, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2944, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-5f58@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-aa5f522e-076c-4d0f-a718-79bd3c95", "args": []}) = 1 

tests/user_test.py::test_get_logs 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "course_name": "test-test-98c00dec-2e01-4e0a-9b39-0617572d course name", "max_enrollment": 10, "args": []}) = {"course_id": 847} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-3bfe@gmail.com", "course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "name": "Dr. Admin", "args": []}) = {"id": 2497, "name": "Dr. Admin", "email": "simsong+admin+test-3bfe@gmail.com", "primary_course_id": 847, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2497, "course_id": 847} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-3bfe@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-3bfe@gmail.com user_id=2497
INFO     root:db.py:469 course_id=847
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-3bfe@gmail.com", "course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "args": []}) = {"user_id": 2497, "course_id": 847} 
INFO     root:dbmaint.py:261 generated course_key=test-98c00dec-2e01-4e0a-9b39-0617572d  admin_email=simsong+admin+test-3bfe@gmail.com admin_id=2497
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-f42d@gmail.com", "course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2498, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-f42d@gmail.com", "primary_course_id": 847, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 1, "user_id": 2498, "course_id": 847} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-f42d@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-f42d@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2498, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2945 
DEBUG    root:db.py:672 purge_movie_data movie_id=2945
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2945, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2945
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2945, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2945
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2945, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2945, "args": []}) = [{"movie_id": 2945, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2498, "course_id": 847, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/847/2945-5ac4.mov
INFO     root:db_object.py:187 write_object(db://object_store/847/2945-5ac4.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2498, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2946 
DEBUG    root:db.py:672 purge_movie_data movie_id=2946
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2946, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2946
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2946, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2946
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2946, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2946, "args": []}) = [{"movie_id": 2946, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2498, "course_id": 847, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/847/2946-62e9.mov
INFO     root:db_object.py:187 write_object(db://object_store/847/2946-62e9.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2498, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2947 
DEBUG    root:db.py:672 purge_movie_data movie_id=2947
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2947, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2947
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2947, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2947
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2947, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2947, "args": []}) = [{"movie_id": 2947, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035460, "user_id": 2498, "course_id": 847, "published": 0, "deleted": 0, "date_uploaded": 1746035460, "mtime": "2025-04-30 13:51:00", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/847/2947-d40b.mov
INFO     root:db_object.py:187 write_object(db://object_store/847/2947-d40b.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-264d36@gmail.com", "course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "name": "Test User Name", "args": []}) = {"id": 2499, "name": "Test User Name", "email": "simsong+test-264d36@gmail.com", "primary_course_id": 847, "created_at": 1746035460, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:00", "demo": 0, "user_id": 2499, "course_id": 847} 
INFO     root:user_test.py:98 generated user_email=simsong+test-264d36@gmail.com user_id=2499
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-264d36@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-264d36@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
INFO     root:user_test.py:189 security=False
INFO     root:user_test.py:189 security=True
DEBUG    root:db.py:111 validate_api_key({"args": ["0df83ecfc0a64b9db6bc7cc69e8a31bf"]}) = null 
DEBUG    root:db.py:178 validate_api_key(0df83ecfc0a64b9db6bc7cc69e8a31bf)=[OrderedDict({'id': 2499, 'user_id': 2499, 'api_key': '0df83ecfc0a64b9db6bc7cc69e8a31bf', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035460, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 51), 'name': 'Test User Name', 'email': 'simsong+test-264d36@gmail.com', 'primary_course_id': 847, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
PASSED                                                                   [ 96%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["0df83ecfc0a64b9db6bc7cc69e8a31bf"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-264d36@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-3bfe@gmail.com", "course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-3bfe@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2945
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2945, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2945
INFO     root:db_object.py:207 delete_object(db://object_store/847/2945-5ac4.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/847/2945-5ac4.mov o=ParseResult(scheme='db', netloc='object_store', path='/847/2945-5ac4.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2945, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2945, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2946
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2946, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2946
INFO     root:db_object.py:207 delete_object(db://object_store/847/2946-62e9.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/847/2946-62e9.mov o=ParseResult(scheme='db', netloc='object_store', path='/847/2946-62e9.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2946, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2946, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2947
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2947, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2947
INFO     root:db_object.py:207 delete_object(db://object_store/847/2947-d40b.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/847/2947-d40b.mov o=ParseResult(scheme='db', netloc='object_store', path='/847/2947-d40b.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2947, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2947, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-f42d@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-98c00dec-2e01-4e0a-9b39-0617572d", "args": []}) = 1 

tests/user_test.py::test_course_list 
-------------------------------- live log setup --------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "course_name": "test-test-5b5006f2-70a9-4a9b-aecf-fb4cd519 course name", "max_enrollment": 10, "args": []}) = {"course_id": 848} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-fdc5@gmail.com", "course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "name": "Dr. Admin", "args": []}) = {"id": 2500, "name": "Dr. Admin", "email": "simsong+admin+test-fdc5@gmail.com", "primary_course_id": 848, "created_at": 1746035461, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:01", "demo": 0, "user_id": 2500, "course_id": 848} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-fdc5@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-fdc5@gmail.com user_id=2500
INFO     root:db.py:469 course_id=848
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-fdc5@gmail.com", "course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "args": []}) = {"user_id": 2500, "course_id": 848} 
INFO     root:dbmaint.py:261 generated course_key=test-5b5006f2-70a9-4a9b-aecf-fb4cd519  admin_email=simsong+admin+test-fdc5@gmail.com admin_id=2500
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-e4d7@gmail.com", "course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2501, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-e4d7@gmail.com", "primary_course_id": 848, "created_at": 1746035461, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:01", "demo": 1, "user_id": 2501, "course_id": 848} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-e4d7@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-e4d7@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2501, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2948 
DEBUG    root:db.py:672 purge_movie_data movie_id=2948
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2948, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2948
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2948, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2948
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2948, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2948, "args": []}) = [{"movie_id": 2948, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035461, "user_id": 2501, "course_id": 848, "published": 0, "deleted": 0, "date_uploaded": 1746035461, "mtime": "2025-04-30 13:51:01", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/848/2948-b81e.mov
INFO     root:db_object.py:187 write_object(db://object_store/848/2948-b81e.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2501, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2949 
DEBUG    root:db.py:672 purge_movie_data movie_id=2949
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2949, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2949
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2949, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2949
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2949, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2949, "args": []}) = [{"movie_id": 2949, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035461, "user_id": 2501, "course_id": 848, "published": 0, "deleted": 0, "date_uploaded": 1746035461, "mtime": "2025-04-30 13:51:01", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/848/2949-39e6.mov
INFO     root:db_object.py:187 write_object(db://object_store/848/2949-39e6.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2501, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2950 
DEBUG    root:db.py:672 purge_movie_data movie_id=2950
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2950, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2950
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2950, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2950
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2950, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2950, "args": []}) = [{"movie_id": 2950, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035461, "user_id": 2501, "course_id": 848, "published": 0, "deleted": 0, "date_uploaded": 1746035461, "mtime": "2025-04-30 13:51:01", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/848/2950-8b75.mov
INFO     root:db_object.py:187 write_object(db://object_store/848/2950-8b75.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-791baa@gmail.com", "course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "name": "Test User Name", "args": []}) = {"id": 2502, "name": "Test User Name", "email": "simsong+test-791baa@gmail.com", "primary_course_id": 848, "created_at": 1746035461, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:51:01", "demo": 0, "user_id": 2502, "course_id": 848} 
INFO     root:user_test.py:98 generated user_email=simsong+test-791baa@gmail.com user_id=2502
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-791baa@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-791baa@gmail.com"}) = {"api_key": "*****"} 
-------------------------------- live log call ---------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["f3b74e0a17584f3e918211b6ca4dfacc"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f3b74e0a17584f3e918211b6ca4dfacc)=[OrderedDict({'id': 2502, 'user_id': 2502, 'api_key': 'f3b74e0a17584f3e918211b6ca4dfacc', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035461, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 51, 1), 'name': 'Test User Name', 'email': 'simsong+test-791baa@gmail.com', 'primary_course_id': 848, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 list_users({"user_id": 2502, "args": []}) = {"users": [{"name": "Dr. Admin", "email": "simsong+admin+test-fdc5@gmail.com", "primary_course_id": 848, "user_id": 2500, "first": null, "last": null}, {"name": "Plant Tracer Demo Account", "email": "demo+admin+test-e4d7@gmail.com", "primary_course_id": 848, "user_id": 2501, "first": null, "last": null}, {"name": "Test User Name", "email": "simsong+test-791baa@gmail.com", "primary_course_id": 848, "user_id": 2502, "first": 1746035461, "last": 1746035461}], "courses": [{"course_id": 19, "course_name": "Demo Course", "course_section": null, "max_enrollment": 20}, {"course_id": 509, "course_name": "beta", "course_section": null, "max_enrollment": 20}, {"course_id": 769, "course_name": "test-test-268e0075-1fa6-431d-aa0d-4992405d course name", "course_section": null, "max_enrollment": 10}, {"course_id": 770, "course_name": "test-test-fa3a95ae-141e-4050-8758-e184abe6 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 771, "course_name": "test-test-53a288e7-86a8-401a-8862-76c8eb14 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 772, "course_name": "test-test-7be9b673-8ac8-4439-998c-1e8a5c6f course name", "course_section": null, "max_enrollment": 10}, {"course_id": 773, "course_name": "test-test-20f8885e-16e3-4294-a202-eef6ff18 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 774, "course_name": "test-test-3970cb8e-83a3-45a6-bfde-3bf62eb5 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 775, "course_name": "test-test-fb78b19a-174d-4c29-b8dc-a0c32ea4 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 776, "course_name": "test-test-2e477cfc-4ad2-4d8d-819b-30799b6f course name", "course_section": null, "max_enrollment": 10}, {"course_id": 777, "course_name": "test-test-f6ae3a70-3c8a-45f5-9a29-2ad06ea3 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 778, "course_name": "test-test-2e765a1e-f5c3-4d7f-a8a8-e253302b course name", "course_section": null, "max_enrollment": 10}, {"course_id": 779, "course_name": "test-test-dd531e50-03d7-4beb-876a-5f31892d course name", "course_section": null, "max_enrollment": 10}, {"course_id": 780, "course_name": "test-test-7131b7af-837b-4737-bf20-07e6036b course name", "course_section": null, "max_enrollment": 10}, {"course_id": 781, "course_name": "test-test-26126f5d-24d5-4fb0-b1a0-7b9caef8 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 782, "course_name": "test-test-25501862-869f-482c-9d35-564ee2fb course name", "course_section": null, "max_enrollment": 10}, {"course_id": 783, "course_name": "test-test-4fdc1dc5-c980-402b-a9b1-a2392291 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 784, "course_name": "test-test-7a740fcf-c8e7-460f-9fa0-f31fc8e5 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 785, "course_name": "test-test-0bfe7207-82a7-45d9-9cb7-cd70d063 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 786, "course_name": "test-test-ec5e61cb-7e21-494a-a4b5-04a8f275 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 787, "course_name": "test-test-b2960b8a-14e7-4985-8841-0b96f6c9 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 788, "course_name": "test-test-1e73ec21-00e2-4535-b879-dbd906d1 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 848, "course_name": "test-test-5b5006f2-70a9-4a9b-aecf-fb4cd519 course name", "course_section": null, "max_enrollment": 10}]} 
DEBUG    root:db.py:111 validate_api_key({"args": ["f3b74e0a17584f3e918211b6ca4dfacc"]}) = null 
DEBUG    root:db.py:178 validate_api_key(f3b74e0a17584f3e918211b6ca4dfacc)=[OrderedDict({'id': 2502, 'user_id': 2502, 'api_key': 'f3b74e0a17584f3e918211b6ca4dfacc', 'first_used_at': 1746035461, 'last_used_at': 1746035461, 'created_at': 1746035461, 'use_count': 1, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 51, 1), 'name': 'Test User Name', 'email': 'simsong+test-791baa@gmail.com', 'primary_course_id': 848, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 list_users({"user_id": 2502, "args": []}) = {"users": [{"name": "Dr. Admin", "email": "simsong+admin+test-fdc5@gmail.com", "primary_course_id": 848, "user_id": 2500, "first": null, "last": null}, {"name": "Plant Tracer Demo Account", "email": "demo+admin+test-e4d7@gmail.com", "primary_course_id": 848, "user_id": 2501, "first": null, "last": null}, {"name": "Test User Name", "email": "simsong+test-791baa@gmail.com", "primary_course_id": 848, "user_id": 2502, "first": 1746035461, "last": 1746035461}], "courses": [{"course_id": 19, "course_name": "Demo Course", "course_section": null, "max_enrollment": 20}, {"course_id": 509, "course_name": "beta", "course_section": null, "max_enrollment": 20}, {"course_id": 769, "course_name": "test-test-268e0075-1fa6-431d-aa0d-4992405d course name", "course_section": null, "max_enrollment": 10}, {"course_id": 770, "course_name": "test-test-fa3a95ae-141e-4050-8758-e184abe6 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 771, "course_name": "test-test-53a288e7-86a8-401a-8862-76c8eb14 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 772, "course_name": "test-test-7be9b673-8ac8-4439-998c-1e8a5c6f course name", "course_section": null, "max_enrollment": 10}, {"course_id": 773, "course_name": "test-test-20f8885e-16e3-4294-a202-eef6ff18 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 774, "course_name": "test-test-3970cb8e-83a3-45a6-bfde-3bf62eb5 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 775, "course_name": "test-test-fb78b19a-174d-4c29-b8dc-a0c32ea4 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 776, "course_name": "test-test-2e477cfc-4ad2-4d8d-819b-30799b6f course name", "course_section": null, "max_enrollment": 10}, {"course_id": 777, "course_name": "test-test-f6ae3a70-3c8a-45f5-9a29-2ad06ea3 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 778, "course_name": "test-test-2e765a1e-f5c3-4d7f-a8a8-e253302b course name", "course_section": null, "max_enrollment": 10}, {"course_id": 779, "course_name": "test-test-dd531e50-03d7-4beb-876a-5f31892d course name", "course_section": null, "max_enrollment": 10}, {"course_id": 780, "course_name": "test-test-7131b7af-837b-4737-bf20-07e6036b course name", "course_section": null, "max_enrollment": 10}, {"course_id": 781, "course_name": "test-test-26126f5d-24d5-4fb0-b1a0-7b9caef8 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 782, "course_name": "test-test-25501862-869f-482c-9d35-564ee2fb course name", "course_section": null, "max_enrollment": 10}, {"course_id": 783, "course_name": "test-test-4fdc1dc5-c980-402b-a9b1-a2392291 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 784, "course_name": "test-test-7a740fcf-c8e7-460f-9fa0-f31fc8e5 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 785, "course_name": "test-test-0bfe7207-82a7-45d9-9cb7-cd70d063 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 786, "course_name": "test-test-ec5e61cb-7e21-494a-a4b5-04a8f275 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 787, "course_name": "test-test-b2960b8a-14e7-4985-8841-0b96f6c9 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 788, "course_name": "test-test-1e73ec21-00e2-4535-b879-dbd906d1 course name", "course_section": null, "max_enrollment": 10}, {"course_id": 848, "course_name": "test-test-5b5006f2-70a9-4a9b-aecf-fb4cd519 course name", "course_section": null, "max_enrollment": 10}]} 
PASSED                                                                   [ 98%]
------------------------------ live log teardown -------------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["f3b74e0a17584f3e918211b6ca4dfacc"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-791baa@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-fdc5@gmail.com", "course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-fdc5@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2948
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2948, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2948
INFO     root:db_object.py:207 delete_object(db://object_store/848/2948-b81e.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/848/2948-b81e.mov o=ParseResult(scheme='db', netloc='object_store', path='/848/2948-b81e.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2948, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2948, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2949
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2949, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2949
INFO     root:db_object.py:207 delete_object(db://object_store/848/2949-39e6.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/848/2949-39e6.mov o=ParseResult(scheme='db', netloc='object_store', path='/848/2949-39e6.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2949, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2949, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2950
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2950, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2950
INFO     root:db_object.py:207 delete_object(db://object_store/848/2950-8b75.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/848/2950-8b75.mov o=ParseResult(scheme='db', netloc='object_store', path='/848/2950-8b75.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2950, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2950, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-e4d7@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-5b5006f2-70a9-4a9b-aecf-fb4cd519", "args": []}) = 1 

tests/user_test.py::test_log_search_user SKIPPED (logging currently ...) [100%]

=================================== FAILURES ===================================
__________________________ test_bulk_register_success __________________________

client = <FlaskClient <Flask 'app.bottle_app'>>
new_course = {'admin_email': 'simsong+admin+test-fad5@gmail.com', 'admin_id': 2456, 'course_id': 833, 'course_key': 'test-2f60c75a-dfe1-4c06-8a13-246c7a54', ...}
api_key = '94de7cf55cbf4603a1abb626b07c7155'

    def test_bulk_register_success(client, new_course, api_key):
        """This tests the bulk-register api happy path when given a list of 1 email address
        """
        email_address = 'testuser@example.com'
        course_id = new_course[user_test.COURSE_ID]
        r = client.post('/api/bulk-register',
                        data={'api_key': api_key,
                              'course_id': str(course_id),
                              'email-addresses': [email_address],
                              'planttracer-endpoint': 'https://example.com/',
                             })
        logging.debug("r.json=%s",r.json)
        res = r.json
>       assert res['error'] is False
E       assert True is False

tests/endpoint_test.py:93: AssertionError
---------------------------- Captured stderr setup -----------------------------
DEBUG:root:create_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "course_name": "test-test-2f60c75a-dfe1-4c06-8a13-246c7a54 course name", "max_enrollment": 10, "args": []}) = {"course_id": 833} 
DEBUG:root:register_email({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Dr. Admin", "args": []}) = {"id": 2456, "name": "Dr. Admin", "email": "simsong+admin+test-fad5@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2456, "course_id": 833} 
DEBUG:root:lookup_user({"email": "simsong+admin+test-fad5@gmail.com", "args": []}) = null 
INFO:root:make_course_admin. email=simsong+admin+test-fad5@gmail.com user_id=2456
INFO:root:course_id=833
DEBUG:root:make_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = {"user_id": 2456, "course_id": 833} 
INFO:root:generated course_key=test-2f60c75a-dfe1-4c06-8a13-246c7a54  admin_email=simsong+admin+test-fad5@gmail.com admin_id=2456
DEBUG:root:register_email({"email": "demo+admin+test-8a31@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2457, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-8a31@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2457, "course_id": 833} 
DEBUG:root:lookup_user({"email": "demo+admin+test-8a31@gmail.com", "args": []}) = null 
DEBUG:root:make_new_api_key({"email": "demo+admin+test-8a31@gmail.com"}) = {"api_key": "*****"} 
DEBUG:root:create_new_movie({"user_id": 2457, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2894 
DEBUG:root:purge_movie_data movie_id=2894
DEBUG:root:purge_movie_data({"movie_id": 2894, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2894
DEBUG:root:purge_movie_frames({"movie_id": 2894, "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2894
DEBUG:root:purge_movie_zipfile({"movie_id": 2894, "args": []}) = null 
DEBUG:root:get_movie_metadata({"user_id": 0, "movie_id": 2894, "args": []}) = [{"movie_id": 2894, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG:root:make_urn urn=db://object_store/833/2894-da86.mov
INFO:root:write_object(db://object_store/833/2894-da86.mov,len=62805)
DEBUG:root:create_new_movie({"user_id": 2457, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2895 
DEBUG:root:purge_movie_data movie_id=2895
DEBUG:root:purge_movie_data({"movie_id": 2895, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2895
DEBUG:root:purge_movie_frames({"movie_id": 2895, "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2895
DEBUG:root:purge_movie_zipfile({"movie_id": 2895, "args": []}) = null 
DEBUG:root:get_movie_metadata({"user_id": 0, "movie_id": 2895, "args": []}) = [{"movie_id": 2895, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG:root:make_urn urn=db://object_store/833/2895-5603.mov
INFO:root:write_object(db://object_store/833/2895-5603.mov,len=235944)
DEBUG:root:create_new_movie({"user_id": 2457, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2896 
DEBUG:root:purge_movie_data movie_id=2896
DEBUG:root:purge_movie_data({"movie_id": 2896, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2896
DEBUG:root:purge_movie_frames({"movie_id": 2896, "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2896
DEBUG:root:purge_movie_zipfile({"movie_id": 2896, "args": []}) = null 
DEBUG:root:get_movie_metadata({"user_id": 0, "movie_id": 2896, "args": []}) = [{"movie_id": 2896, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG:root:make_urn urn=db://object_store/833/2896-50a7.mov
INFO:root:write_object(db://object_store/833/2896-50a7.mov,len=690774)
DEBUG:root:register_email({"email": "simsong+test-83e9e2@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Test User Name", "args": []}) = {"id": 2458, "name": "Test User Name", "email": "simsong+test-83e9e2@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2458, "course_id": 833} 
INFO:root:generated user_email=simsong+test-83e9e2@gmail.com user_id=2458
DEBUG:root:lookup_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG:root:make_new_api_key({"email": "simsong+test-83e9e2@gmail.com"}) = {"api_key": "*****"} 
------------------------------ Captured log setup ------------------------------
DEBUG    root:db.py:111 create_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "course_name": "test-test-2f60c75a-dfe1-4c06-8a13-246c7a54 course name", "max_enrollment": 10, "args": []}) = {"course_id": 833} 
DEBUG    root:db.py:111 register_email({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Dr. Admin", "args": []}) = {"id": 2456, "name": "Dr. Admin", "email": "simsong+admin+test-fad5@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2456, "course_id": 833} 
DEBUG    root:db.py:111 lookup_user({"email": "simsong+admin+test-fad5@gmail.com", "args": []}) = null 
INFO     root:db.py:464 make_course_admin. email=simsong+admin+test-fad5@gmail.com user_id=2456
INFO     root:db.py:469 course_id=833
DEBUG    root:db.py:111 make_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = {"user_id": 2456, "course_id": 833} 
INFO     root:dbmaint.py:261 generated course_key=test-2f60c75a-dfe1-4c06-8a13-246c7a54  admin_email=simsong+admin+test-fad5@gmail.com admin_id=2456
DEBUG    root:db.py:111 register_email({"email": "demo+admin+test-8a31@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Plant Tracer Demo Account", "demo_user": 1, "args": []}) = {"id": 2457, "name": "Plant Tracer Demo Account", "email": "demo+admin+test-8a31@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 1, "user_id": 2457, "course_id": 833} 
DEBUG    root:db.py:111 lookup_user({"email": "demo+admin+test-8a31@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "demo+admin+test-8a31@gmail.com"}) = {"api_key": "*****"} 
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #1", "description": "Track this movie!", "args": []}) = 2894 
DEBUG    root:db.py:672 purge_movie_data movie_id=2894
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2894
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2894
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2894, "args": []}) = [{"movie_id": 2894, "title": "Demo Movie #1", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2894-da86.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2894-da86.mov,len=62805)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #2", "description": "Track this movie!", "args": []}) = 2895 
DEBUG    root:db.py:672 purge_movie_data movie_id=2895
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2895
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2895
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2895, "args": []}) = [{"movie_id": 2895, "title": "Demo Movie #2", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2895-5603.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2895-5603.mov,len=235944)
DEBUG    root:db.py:111 create_new_movie({"user_id": 2457, "title": "Demo Movie #3", "description": "Track this movie!", "args": []}) = 2896 
DEBUG    root:db.py:672 purge_movie_data movie_id=2896
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2896
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:687 purge_movie_data movie_id=2896
DEBUG    root:db.py:111 purge_movie_zipfile({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:111 get_movie_metadata({"user_id": 0, "movie_id": 2896, "args": []}) = [{"movie_id": 2896, "title": "Demo Movie #3", "description": "Track this movie!", "created_at": 1746035458, "user_id": 2457, "course_id": 833, "published": 0, "deleted": 0, "date_uploaded": 1746035458, "mtime": "2025-04-30 13:50:58", "version": 1, "fps": null, "width": null, "height": null, "total_frames": null, "total_bytes": null, "status": null, "movie_data_urn": null, "movie_zipfile_urn": null, "tracked_movie_id": null}] 
DEBUG    root:db_object.py:105 make_urn urn=db://object_store/833/2896-50a7.mov
INFO     root:db_object.py:187 write_object(db://object_store/833/2896-50a7.mov,len=690774)
DEBUG    root:db.py:111 register_email({"email": "simsong+test-83e9e2@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "name": "Test User Name", "args": []}) = {"id": 2458, "name": "Test User Name", "email": "simsong+test-83e9e2@gmail.com", "primary_course_id": 833, "created_at": 1746035458, "enabled": 1, "links_sent_without_acknowledgement": 0, "mtime": "2025-04-30 13:50:58", "demo": 0, "user_id": 2458, "course_id": 833} 
INFO     root:user_test.py:98 generated user_email=simsong+test-83e9e2@gmail.com user_id=2458
DEBUG    root:db.py:111 lookup_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 make_new_api_key({"email": "simsong+test-83e9e2@gmail.com"}) = {"api_key": "*****"}
----------------------------- Captured stderr call -----------------------------
DEBUG:root:validate_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = null 
DEBUG:root:validate_api_key(94de7cf55cbf4603a1abb626b07c7155)=[OrderedDict({'id': 2458, 'user_id': 2458, 'api_key': '94de7cf55cbf4603a1abb626b07c7155', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-83e9e2@gmail.com', 'primary_course_id': 833, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG:root:check_course_admin({"course_id": 833, "user_id": 2458, "args": []}) = false 
DEBUG:root:r.json={'error': True, 'message': 'User is not authorized to manipulate course.'}
------------------------------ Captured log call -------------------------------
DEBUG    root:db.py:111 validate_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = null 
DEBUG    root:db.py:178 validate_api_key(94de7cf55cbf4603a1abb626b07c7155)=[OrderedDict({'id': 2458, 'user_id': 2458, 'api_key': '94de7cf55cbf4603a1abb626b07c7155', 'first_used_at': None, 'last_used_at': None, 'created_at': 1746035458, 'use_count': 0, 'enabled': 1, 'mtime': datetime.datetime(2025, 4, 30, 13, 50, 58), 'name': 'Test User Name', 'email': 'simsong+test-83e9e2@gmail.com', 'primary_course_id': 833, 'links_sent_without_acknowledgement': 0, 'demo': 0})] dbreader=<DBMySQLAuth host=localhost database=actions_test user=dbreader_actions_test prefix= debug=None>
DEBUG    root:db.py:111 check_course_admin({"course_id": 833, "user_id": 2458, "args": []}) = false 
DEBUG    root:endpoint_test.py:91 r.json={'error': True, 'message': 'User is not authorized to manipulate course.'}
--------------------------- Captured stderr teardown ---------------------------
DEBUG:root:delete_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = 1 
DEBUG:root:delete_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG:root:remove_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = null 
DEBUG:root:delete_user({"email": "simsong+admin+test-fad5@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2894
DEBUG:root:purge_movie_frames({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2894
INFO:root:delete_object(db://object_store/833/2894-da86.mov)
DEBUG:root:urn=db://object_store/833/2894-da86.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2894-da86.mov', params='', query='', fragment='')
DEBUG:root:purge_movie_data({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie({"movie_id": 2894, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2895
DEBUG:root:purge_movie_frames({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2895
INFO:root:delete_object(db://object_store/833/2895-5603.mov)
DEBUG:root:urn=db://object_store/833/2895-5603.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2895-5603.mov', params='', query='', fragment='')
DEBUG:root:purge_movie_data({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie({"movie_id": 2895, "args": []}) = null 
DEBUG:root:purge_movie_frames movie_id=2896
DEBUG:root:purge_movie_frames({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie_data movie_id=2896
INFO:root:delete_object(db://object_store/833/2896-50a7.mov)
DEBUG:root:urn=db://object_store/833/2896-50a7.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2896-50a7.mov', params='', query='', fragment='')
DEBUG:root:purge_movie_data({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG:root:purge_movie({"movie_id": 2896, "args": []}) = null 
DEBUG:root:delete_user({"email": "demo+admin+test-8a31@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG:root:delete_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = 1 
---------------------------- Captured log teardown -----------------------------
DEBUG    root:db.py:111 delete_api_key({"args": ["94de7cf55cbf4603a1abb626b07c7155"]}) = 1 
DEBUG    root:db.py:111 delete_user({"email": "simsong+test-83e9e2@gmail.com", "args": []}) = null 
DEBUG    root:db.py:111 remove_course_admin({"email": "simsong+admin+test-fad5@gmail.com", "course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "simsong+admin+test-fad5@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2894
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2894
INFO     root:db_object.py:207 delete_object(db://object_store/833/2894-da86.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2894-da86.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2894-da86.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2894, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2894, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2895
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2895
INFO     root:db_object.py:207 delete_object(db://object_store/833/2895-5603.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2895-5603.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2895-5603.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2895, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2895, "args": []}) = null 
DEBUG    root:db.py:660 purge_movie_frames movie_id=2896
DEBUG    root:db.py:111 purge_movie_frames({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:672 purge_movie_data movie_id=2896
INFO     root:db_object.py:207 delete_object(db://object_store/833/2896-50a7.mov)
DEBUG    root:db_object.py:209 urn=db://object_store/833/2896-50a7.mov o=ParseResult(scheme='db', netloc='object_store', path='/833/2896-50a7.mov', params='', query='', fragment='')
DEBUG    root:db.py:111 purge_movie_data({"movie_id": 2896, "callback": "<function null_callback at 0x103b05c60>", "args": []}) = null 
DEBUG    root:db.py:111 purge_movie({"movie_id": 2896, "args": []}) = null 
DEBUG    root:db.py:111 delete_user({"email": "demo+admin+test-8a31@gmail.com", "purge_movies": true, "args": []}) = null 
DEBUG    root:db.py:111 delete_course({"course_key": "test-2f60c75a-dfe1-4c06-8a13-246c7a54", "args": []}) = 1
=========================== short test summary info ============================
FAILED tests/endpoint_test.py::test_bulk_register_success - assert True is False
=================== 1 failed, 41 passed, 8 skipped in 4.94s ====================
